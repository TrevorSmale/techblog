<!DOCTYPE html>
<html lang="en-us">

<head><script src="/techblog/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=techblog/livereload" data-no-instant defer></script>
  

  
  


  <meta charset="utf-8">



<meta name="viewport" content="width=device-width, initial-scale=1.0">


  
    
  


<meta name="color-scheme" content="light dark">







<meta name="generator" content="Hugo 0.140.1">
  <title>Tech Blog</title>
  <link rel="canonical" href="http://localhost:1313/techblog/">




  <link rel="alternate" href="/techblog/feed.xml" type="application/rss+xml">

  








  

  
    
    
    
      
      
    
    
    
  
    
    
    
      
      
    
    
    
  
    
    
    
      
      
    
    
    
  
    
    
    
      
      
    
    
    
  
    
    
    
      
      
    
    
    
  
    
    
    
      
      
    
    
    
  
    
    
    
      
      
    
    
    
  
    
    
    
      
      
    
    
    
  
    
    
    
      
      
    
    
    
  
    
    
    
      
      
    
    
    
  


  
    <link rel="stylesheet" href="/techblog/css/base.css">

    <link rel="stylesheet" href="/techblog/css/syntax.css">



</head>

<body>
  <nav class="u-background">
  <div class="u-wrapper">
    <ul class="Banner">
      <li class="Banner-item Banner-item--title">
        <a class="Banner-link u-clickable" href="/techblog/">Tech Blog</a>
      </li>
      
        
        
        <li class="Banner-item">
          <a class="Banner-link u-clickable" href="/techblog/about/">About</a>
        </li>
      
        
        
        <li class="Banner-item">
          <a class="Banner-link u-clickable" href="/techblog/post/">Posts</a>
        </li>
      
        
        
        <li class="Banner-item">
          <a class="Banner-link u-clickable" href="/techblog/tags/">Tags</a>
        </li>
      
        
        
        <li class="Banner-item">
          <a class="Banner-link u-clickable" href="/techblog/categories/">Categories</a>
        </li>
      
        
        
          
        
        <li class="Banner-item">
          <a class="Banner-link u-clickable" href="/techblog/feed.xml">RSS</a>
        </li>
      
    </ul>
  </div>
</nav>

  <main>
    <div class="u-wrapper">
      <div class="u-padding">
        

  
    <header class="Heading">
  <h1 class="Heading-title">
    <a class="Heading-link u-clickable" href="/techblog/" rel="bookmark">Tech Blog</a>
  </h1>
  
    <time datetime="2024-12-28T00:00:00Z">December 28, 2024</time>
  
</header>
  

  

  
  
    <article>
      <header class="Heading">
  <h1 class="Heading-title">
    <a class="Heading-link u-clickable" href="/techblog/post/pacu16/" rel="bookmark">ProLUG Admin Course Unit 16 üêß</a>
  </h1>
  
    <time datetime="2024-12-28T00:00:00Z">December 28, 2024</time>
  
</header>
      
        <h1 id="incident-response">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu16/#incident-response">Incident Response</a>
</h1>
<p>Incident response is a structured approach to identifying, managing, and resolving unexpected events such as security breaches, system failures, or misconfigurations. It aims to minimize disruption, mitigate damage, and restore normal operations while implementing lessons learned to prevent future incidents.</p>
<p>Responding to incidents is a stressful event because it can involve many stakeholders and little time. This week we exercised our skills by live debugging in front of our peers on a remote host. The problems all related to failure modes and misconfiguration and the exercise was rewarding in that I learned a lot as always, and built some confidence.</p>
<hr>



<h1 id="incident-response--troubleshooting-scenarios">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu16/#incident-response--troubleshooting-scenarios">Incident Response / Troubleshooting Scenarios</a>
</h1>



<h2 id="scenario-1-web-server-not-running">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu16/#scenario-1-web-server-not-running">Scenario #1: Web Server Not Running</a>
</h2>
<p><strong>Objective</strong>: Ensure the web server is running and responding on port 80.<br>
<strong>Steps</strong>:</p>
<ul>
<li><strong>Verify web server service</strong>:
<ul>
<li>Run: <code>systemctl enable --now httpd</code> (or similar command).</li>
</ul>
</li>
<li><strong>Check open ports</strong>:
<ul>
<li>Run: <code>ss -ntulp</code>.</li>
<li>Identify if the server is running on port 8087 instead of 80.</li>
<li>Edit the configuration:
<ul>
<li>File: <code>/etc/httpd/conf/httpd.conf</code>.</li>
<li>Change <code>Listen 8087</code> to <code>Listen 80</code>.</li>
</ul>
</li>
<li>Restart the service: <code>systemctl restart httpd</code>.</li>
</ul>
</li>
<li><strong>Ensure external connectivity</strong>:
<ul>
<li>Check the firewall status: <code>systemctl status firewalld</code>.</li>
<li>Options:
<ul>
<li>Disable the firewall: <code>systemctl stop firewalld</code>.</li>
<li>Open port 80 if needed.</li>
</ul>
</li>
</ul>
</li>
<li><strong>Final step</strong>:
<ul>
<li>REBOOT the lab machine.</li>
</ul>
</li>
</ul>
<hr>



<h2 id="scenario-2-mount-point-space-not-working">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu16/#scenario-2-mount-point-space-not-working">Scenario #2: Mount Point /space Not Working</a>
</h2>
<p><strong>Objective</strong>: Set up a 9GB partition on the <code>/space</code> mount point using LVM.<br>
<strong>Steps</strong>:</p>
<ol>
<li><strong>Verify <code>/space</code> setup</strong>:
<ul>
<li>Confirm the partition is not properly set up.</li>
</ul>
</li>
<li><strong>Create LVM setup</strong>:
<ul>
<li>Identify disks: <code>fdisk -l | grep -i xvd</code>.</li>
<li>Create physical volumes: <code>pvcreate /dev/xvd&lt;disk&gt;</code>.</li>
<li>Create a volume group:
<ul>
<li>Run: <code>vgcreate space /dev/xvd&lt;disk1&gt; /dev/xvd&lt;disk2&gt; /dev/xvd&lt;disk3&gt;</code>.</li>
</ul>
</li>
<li>Create a logical volume:
<ul>
<li>Run: <code>lvcreate -n space -l +100%FREE space</code>.</li>
</ul>
</li>
</ul>
</li>
<li><strong>Format the logical volume</strong>:
<ul>
<li>Create a filesystem: <code>mkfs.ext4 /dev/mapper/&lt;logical_volume_name&gt;</code>.</li>
</ul>
</li>
<li><strong>Mount the filesystem</strong>:
<ul>
<li>Create the mount point: <code>mkdir /space</code>.</li>
<li>Add an entry in <code>/etc/fstab</code>:

  

<pre tabindex="0"><code class="language-fstab" data-lang="fstab">/dev/mapper/&lt;logical_volume_name&gt; /space &lt;ext4 or xfs&gt; defaults 1 2</code></pre>
</li>
<li>Mount the filesystem: <code>mount -a</code>.</li>
</ul>
</li>
<li><strong>Final step</strong>:
<ul>
<li>REBOOT the lab machine.</li>
</ul>
</li>
</ol>
<hr>



<h2 id="scenario-3-system-not-updating">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu16/#scenario-3-system-not-updating">Scenario #3: System Not Updating</a>
</h2>
<p><strong>Objective</strong>: Fix the system to allow updates via <code>dnf</code> and ensure kernel updates.<br>
<strong>Steps</strong>:</p>
<ol>
<li><strong>Fix DNF repository configuration</strong>:
<ul>
<li>Edit <code>/etc/yum.repos.d/rocky.repo</code>:
<ul>
<li>Set <code>enabled=1</code> for all necessary repositories.</li>
</ul>
</li>
<li>Check <code>/etc/yum.repos.d/rocky.repo.orig</code> for reference.</li>
<li>Fix the EPEL repository the same way.</li>
</ul>
</li>
<li><strong>Verify kernel updates</strong>:
<ul>
<li>Edit <code>/etc/yum.conf</code>:
<ul>
<li>Comment out the line: <code>exclude=kernel*</code>.</li>
</ul>
</li>
</ul>
</li>
<li><strong>Final step</strong>:
<ul>
<li>REBOOT the lab machine if necessary.</li>
</ul>
</li>
</ol>
<hr>



<h3 id="prolug-links-">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu16/#prolug-links-">ProLUG Links ‚õìÔ∏è</a>
</h3>
<p>Discord: <a href="https://discord.com/invite/m6VPPD9usw">https://discord.com/invite/m6VPPD9usw</a>
Youtube: <a href="https://www.youtube.com/@het_tanis8213">https://www.youtube.com/@het_tanis8213</a>
Twitch: <a href="https://www.twitch.tv/het_tanis">https://www.twitch.tv/het_tanis</a>
ProLUG Book: <a href="https://leanpub.com/theprolugbigbookoflabs">https://leanpub.com/theprolugbigbookoflabs</a>
KillerCoda: <a href="https://killercoda.com/het-tanis">https://killercoda.com/het-tanis</a></p>
      
      

  

  





  <footer>
    
      
        <ul class="Tags">
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/categories/learning/" rel="tag">Learning</a>
            </li>
          
        </ul>
      
    
      
        <ul class="Tags">
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/tech/" rel="tag">Tech</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/linux/" rel="tag">Linux</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/administration/" rel="tag">Administration</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/engineering/" rel="tag">Engineering</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/prolug-course/" rel="tag">ProLUG Course</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/operating-systems/" rel="tag">Operating Systems</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/trouble-shooting/" rel="tag">Trouble Shooting</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/incident-response/" rel="tag">Incident Response</a>
            </li>
          
        </ul>
      
    
  </footer>

    </article>
    
      <div class="Divider"></div>
    
  
    <article>
      <header class="Heading">
  <h1 class="Heading-title">
    <a class="Heading-link u-clickable" href="/techblog/post/pacurecap/" rel="bookmark">Wrapping up ProLUC PAC</a>
  </h1>
  
    <time datetime="2024-12-28T00:00:00Z">December 28, 2024</time>
  
</header>
      
        <h1 id="the-wrap-">
  <a class="Heading-link u-clickable" href="/techblog/post/pacurecap/#the-wrap-">The Wrap üì¶</a>
</h1>
<p>Yesterday, our close-knit group completed an intensive 16-week hands-on course in Enterprise Linux Administration, culminating in a live incident response session.</p>
<p>Over the course of hundreds of hours, I pushed myself to go above and beyond in my studies and responsibilities. Along the way, I formed strong connections with like-minded peers, navigating the modern educational landscape of YouTube, Discord, and KillerCoda.</p>
<p>I am truly grateful to have stumbled upon this seemingly random community and to have experienced the structured, effective teaching methods of Scott Champine (Het Tanis), an experienced and traditional educator.</p>



<h2 id="discord-">
  <a class="Heading-link u-clickable" href="/techblog/post/pacurecap/#discord-">Discord üí¨</a>
</h2>
<p>To understand the environment, we must first understand the platform. Discord is a communication platform that combines text, voice, and video chat, designed to create communities where people can interact in real-time. What makes it unique is its seamless integration of customizable servers, topic-specific channels, and robust tools for both casual conversation and collaborative work.</p>
<p>Working on discord harbored a comfortable sense of passive interaction. Unlike say Zoom, Skype or any other similar video communication platform, Discord allows for people to come and go as they please, have multiple presenters and open voice chat, replicating a real world meeting more closely.</p>
<p>This allowed for impromptu discussions / presentation, greatly improving the learning experience.</p>



<h2 id="study-group-">
  <a class="Heading-link u-clickable" href="/techblog/post/pacurecap/#study-group-">Study group üèòÔ∏è</a>
</h2>
<p>Early in the course, I applied my leadership skills by organizing a formal schedule for our study group meetings. These sessions covered course assignments in detail while also exploring related topics through collaborative, interactive projects.</p>
<p>The format was casual and engaging. I would share my screen to walk through scenarios while the group discussed the subject matter. Others also shared their screens, demonstrating tips and tricks in unison.</p>
<p>One of the most effective tools I introduced was a shared note using Etherpad. Similar to Google Docs, Etherpad allows multiple people to edit a document simultaneously. However, it stands out by enabling access without requiring sign-in credentials, making it easy to share with anyone.</p>
<p>These activities relied heavily on trust, as it would have been easy for someone to disrupt the sessions. My leadership skills were frequently tested by off-topic individuals or disruptive participants, but such issues were usually short-lived.</p>



<h2 id="gains-">
  <a class="Heading-link u-clickable" href="/techblog/post/pacurecap/#gains-">Gains üí™üèª</a>
</h2>
<p>Coming into the course, I already had a solid understanding of Linux, backed by a few years of experience. Additionally, I had completed RWXRob‚Äôs (Rob Muhlestein‚Äôs) Beginner Boost DevOps course a year prior.</p>
<p>What set this course apart was its group-learning dynamic. During Rob‚Äôs course, I worked alone, building projects and debugging through hard-fought, self-directed methods like reading documentation, brute-forcing solutions, and referencing forums. In contrast, group work brought added motivation, inspiration, and a collaborative approach to problem-solving. It helped eliminate mundane, off-topic roadblocks, allowing us to focus on core learning and progress more efficiently.</p>



<h2 id="connections-">
  <a class="Heading-link u-clickable" href="/techblog/post/pacurecap/#connections-">Connections ‚õìÔ∏è</a>
</h2>
<p>Through the study group and community discussions, I‚Äôve developed a strong connection with the ProLUG community and feel confident that I can rely on the server for discussions, questions, and troubleshooting. In the near future, I plan to give back by supporting future coursework and helping new learners navigate their journey.</p>



<h2 id="thankful-">
  <a class="Heading-link u-clickable" href="/techblog/post/pacurecap/#thankful-">Thankful üôè</a>
</h2>
<p>I‚Äôm deeply grateful to Scott Champine (Het Tanis) for offering this free course and dedicating so much of his time to it. I‚Äôm equally thankful to the server members who joined the study group and dove headfirst into the intricacies of systems.</p>
<p>Until next time! ‚úåÔ∏è</p>
<hr>



<h3 id="prolug-links-">
  <a class="Heading-link u-clickable" href="/techblog/post/pacurecap/#prolug-links-">ProLUG Links ‚õìÔ∏è</a>
</h3>
<p>Discord: <a href="https://discord.com/invite/m6VPPD9usw">https://discord.com/invite/m6VPPD9usw</a>
Youtube: <a href="https://www.youtube.com/@het_tanis8213">https://www.youtube.com/@het_tanis8213</a>
Twitch: <a href="https://www.twitch.tv/het_tanis">https://www.twitch.tv/het_tanis</a>
ProLUG Book: <a href="https://leanpub.com/theprolugbigbookoflabs">https://leanpub.com/theprolugbigbookoflabs</a>
KillerCoda: <a href="https://killercoda.com/het-tanis">https://killercoda.com/het-tanis</a></p>
      
      

  

  





  <footer>
    
      
        <ul class="Tags">
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/categories/learning/" rel="tag">Learning</a>
            </li>
          
        </ul>
      
    
      
        <ul class="Tags">
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/tech/" rel="tag">Tech</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/administration/" rel="tag">Administration</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/engineering/" rel="tag">Engineering</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/prolug-course/" rel="tag">ProLUG Course</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/linux/" rel="tag">Linux</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/gratitude/" rel="tag">Gratitude</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/graduation/" rel="tag">Graduation</a>
            </li>
          
        </ul>
      
    
  </footer>

    </article>
    
      <div class="Divider"></div>
    
  
    <article>
      <header class="Heading">
  <h1 class="Heading-title">
    <a class="Heading-link u-clickable" href="/techblog/post/pacu15/" rel="bookmark">ProLUG Admin Course Unit 15 üêß</a>
  </h1>
  
    <time datetime="2024-12-25T00:00:00Z">December 25, 2024</time>
  
</header>
      
        <h1 id="engineering-troubleshooting">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu15/#engineering-troubleshooting">Engineering Troubleshooting</a>
</h1>
<p>Systems engineering troubleshooting involves diagnosing and resolving complex issues within interconnected systems to ensure seamless operation and optimal performance. It requires a methodical approach to identify root causes, integrate solutions, and maintain system functionality while addressing both technical and process-related challenges.</p>
<hr>



<h2 id="discussion-post-1">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu15/#discussion-post-1">Discussion Post 1:</a>
</h2>
<p>Your management is all fired up about implementing some Six Sigma processes around the company. You decide to familiarize yourself and get some basic understanding to pass along to your team.</p>



<h3 id="quoted-from-the-book">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu15/#quoted-from-the-book">Quoted from the book</a>
</h3>
<p>5S is a Japanese Lean approach to organizing a workspace, so that by making a process more effective and efficient, it will become easier to identify and expunge muda. 5S relies on visual cues and a clean work area to enhance efficiencies, reduce accidents, and standardize workflows to reduce defects. The method is based on five steps:</p>
<ul>
<li>Sort (Seiri)</li>
<li>Straighten (Seiton)</li>
<li>Shine (Seiso)</li>
<li>Standardize (Seiketsu)</li>
<li>Sustain (Shitsuke)</li>
</ul>



<h3 id="what-about-the-5s-methodology-might-help-us-as-a-team-of-system-administrators">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu15/#what-about-the-5s-methodology-might-help-us-as-a-team-of-system-administrators">What about the ‚Äú5S‚Äù methodology might help us as a team of system administrators?</a>
</h3>
<ul>
<li>Identify and categorize common troubleshooting problems such as typos, illogical configurations, or vulnerabilities to establish clarity and prioritize issues. (Seiri)</li>
<li>Organize and catalog processes and procedures for addressing both routine and uncommon problem scenarios for quick access and consistency. (Seiton)</li>
<li>Validate and test all processes and procedures to ensure they function effectively and reliably. (Seiso)</li>
<li>Promote team familiarity by regularly practicing and drilling procedures, similar to incident response training, to build confidence and efficiency. (Seiketsu)</li>
<li>Apply the processes and procedures in real-world scenarios, evaluate their effectiveness, make necessary adjustments, and document improvements for future use. (Shitsuke)</li>
</ul>
<p>By applying the 5S methodology to troubleshooting, the team can develop a shared understanding of how to consistently address issues, identify system failure points, and create opportunities for incremental improvement, fostering a sense of flow and efficiency.</p>



<h3 id="what-are-the-four-layers-of-process-definition-how-would-you-explain-them-to-your-junior-engineers">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu15/#what-are-the-four-layers-of-process-definition-how-would-you-explain-them-to-your-junior-engineers">What are the four layers of process definition? How would you explain them to your junior engineers?</a>
</h3>
<p>input - anything entering the process or is required to enter the process to drive the creation of an output
outputs - service or product that is created by this process
events - predefined criteria or actions that cause a process to begin working.
tasks - activities are the heart. a unit of action within the process.
4.1 - Decisions are possible made during or for tasks.</p>
<p>The four layers of a process‚Äîinputs, outputs, events, and tasks‚Äîfunction similarly to how a computer program uses functions to process variables and produce results. However, in a Six Sigma process, these elements are more dynamic, encompassing both virtual and physical components, as well as steps that may be driven by either human actions or automated systems. This flexibility allows Six Sigma to address complex workflows that combine diverse inputs and tasks to achieve consistent and efficient outputs.</p>
<p>Looking at our operation as a series of processes with layers like this can help us to identify, refine and standardize processes into Standard Operating Procedures (SOP&rsquo;s).</p>
<hr>



<h2 id="discussion-post-2-your-team-looks-at-a-lot-of-visual-data-you-decide-to-write-up-an-explanation-for-them-to-explain-what-they-look-at">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu15/#discussion-post-2-your-team-looks-at-a-lot-of-visual-data-you-decide-to-write-up-an-explanation-for-them-to-explain-what-they-look-at">Discussion Post 2: Your team looks at a lot of visual data. You decide to write up an explanation for them to explain what they look at.</a>
</h2>



<h3 id="what-is-a-high-water-mark-why-might-it-be-good-to-know-in-utilization-of-systems">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu15/#what-is-a-high-water-mark-why-might-it-be-good-to-know-in-utilization-of-systems">What is a high water mark? Why might it be good to know in utilization of systems?</a>
</h3>
<p>The phrase ‚Äúhigh water mark‚Äù originates from marking a riverbank to indicate the highest water level reached during a season. This mark serves as a warning, signaling potential danger if the water rises beyond it in the future.
In the context of systems, the high water mark represents historically safe operational loads. If metrics indicate that this threshold has been exceeded, it should alert administrators to a potential issue.
For example, if the high water mark for daily memory usage was 14/18 GiB of RAM, and we observe the system suddenly using 16/16 GiB, this warrants attention as a potential problem requiring further investigation.</p>



<h3 id="what-is-an-upper-and-lower-control-limit-in-a-system-output-while-this-isnt-exactly-what-were-looking-at-why-might-it-be-good-to-explain-to-your-junior-engineers">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu15/#what-is-an-upper-and-lower-control-limit-in-a-system-output-while-this-isnt-exactly-what-were-looking-at-why-might-it-be-good-to-explain-to-your-junior-engineers">What is an upper and lower control limit in a system output? While this isn‚Äôt exactly what we‚Äôre looking at, why might it be good to explain to your junior engineers?</a>
</h3>
<p>Control limits are essential tools for monitoring the stability of a process over time. The upper and lower control limits define the normal range within which a process output should remain when the process is operating correctly. If the output exceeds these boundaries, it signals a potential issue, indicating that the process may be out of control and requiring investigation or troubleshooting.</p>
<hr>



<h2 id="definitionsterminology">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu15/#definitionsterminology">Definitions/Terminology</a>
</h2>
<ul>
<li><strong>Incident</strong> An unplanned event that disrupts normal operations.</li>
<li><strong>Problem</strong> The underlying cause of one or more incidents.</li>
<li><strong>FMEA</strong> (Failure Mode and Effects Analysis): A method for identifying and prioritizing potential failure points in a process.</li>
<li><strong>Six Sigma</strong> A data-driven methodology focused on improving processes by reducing defects and variability.</li>
<li><strong>TQM</strong> (Total Quality Management): A management approach emphasizing continuous improvement and customer satisfaction across all organizational processes.</li>
<li><strong>Post Mortem</strong> A retrospective analysis of an event to identify successes and areas for improvement.</li>
<li><strong>Scientific Method</strong> A systematic process of forming hypotheses, testing them, and analyzing results to draw conclusions.</li>
<li><strong>Iterative</strong> A repetitive approach to refining a process or solution through successive cycles.</li>
<li><strong>Discrete Data</strong> Data that can only take specific, distinct values.</li>
<li><strong>Ordinal</strong> Data with a meaningful order but no consistent interval (e.g., satisfaction ratings).</li>
<li><strong>Nominal</strong> (Binary/Attribute): Categorical data without order, such as ‚Äúyes/no‚Äù or ‚Äúmale/female.‚Äù</li>
<li><strong>Continuous Data</strong> Data that can take any value within a range, such as temperature or time.</li>
<li><strong>Risk Priority Number (RPN)</strong> A score in FMEA used to prioritize risks, calculated as Severity √ó Occurrence √ó Detection.</li>
<li><strong>5 Whys</strong> A technique to identify the root cause of a problem by repeatedly asking ‚Äúwhy‚Äù until the root cause is found.</li>
<li><strong>Fishbone Diagram (Ishikawa)</strong> A visual tool used to identify and categorize potential causes of a problem.</li>
<li><strong>Fault Tree Analysis (FTA)</strong> A deductive analysis method used to identify the root causes of system failures.</li>
<li><strong>PDCA (Plan-Do-Check-Act)</strong> A cyclical process for continuous improvement in workflows or systems.</li>
<li><strong>SIPOC</strong> A high-level process map identifying Suppliers, Inputs, Processes, Outputs, and Customers.</li>
</ul>
<hr>



<h3 id="prolug-links-">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu15/#prolug-links-">ProLUG Links ‚õìÔ∏è</a>
</h3>
<p>Discord: <a href="https://discord.com/invite/m6VPPD9usw">https://discord.com/invite/m6VPPD9usw</a>
Youtube: <a href="https://www.youtube.com/@het_tanis8213">https://www.youtube.com/@het_tanis8213</a>
Twitch: <a href="https://www.twitch.tv/het_tanis">https://www.twitch.tv/het_tanis</a>
ProLUG Book: <a href="https://leanpub.com/theprolugbigbookoflabs">https://leanpub.com/theprolugbigbookoflabs</a>
KillerCoda: <a href="https://killercoda.com/het-tanis">https://killercoda.com/het-tanis</a></p>
      
      

  

  





  <footer>
    
      
        <ul class="Tags">
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/categories/learning/" rel="tag">Learning</a>
            </li>
          
        </ul>
      
    
      
        <ul class="Tags">
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/tech/" rel="tag">Tech</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/linux/" rel="tag">Linux</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/administration/" rel="tag">Administration</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/engineering/" rel="tag">Engineering</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/prolug-course/" rel="tag">ProLUG Course</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/operating-systems/" rel="tag">Operating Systems</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/trouble-shooting/" rel="tag">Trouble Shooting</a>
            </li>
          
        </ul>
      
    
  </footer>

    </article>
    
      <div class="Divider"></div>
    
  
    <article>
      <header class="Heading">
  <h1 class="Heading-title">
    <a class="Heading-link u-clickable" href="/techblog/post/pacu14/" rel="bookmark">ProLUG Admin Course Unit 14 üêß</a>
  </h1>
  
    <time datetime="2024-12-22T00:00:00Z">December 22, 2024</time>
  
</header>
      
        <h1 id="ansible-automation">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu14/#ansible-automation">Ansible Automation</a>
</h1>
<p>Ansible is an open-source automation tool used for configuration management, application deployment, and IT orchestration, enabling tasks to be executed on multiple systems simultaneously without the need for agents. It uses simple YAML-based playbooks and SSH for communication, making it efficient and easy to learn for managing infrastructure.</p>
<hr>



<h2 id="discussion-post-1">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu14/#discussion-post-1">Discussion Post 1:</a>
</h2>
<p>Refer to your Unit 5 scan of the systems. You know that Ansible
is a tool that you want to maintain in the environment. Review this online documentation:
<a href="https://docs.ansible.com/ansible/latest/inventory_guide/intro_inventory.html">https://docs.ansible.com/ansible/latest/inventory_guide/intro_inventory.html</a></p>



<h3 id="make-an-inventory-of-the-servers-grouped-any-way-you-like">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu14/#make-an-inventory-of-the-servers-grouped-any-way-you-like">Make an inventory of the servers, grouped any way you like.</a>
</h3>
<p>[warewulf]
192.168.200.25</p>
<p>[ubuntu]
192.168.200.[101:103]
192.168.200.[201:203]</p>
<p>[rockynodes]
192.168.200.[51:69]</p>



<h3 id="what-format-did-you-choose-to-use-for-your-inventory">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu14/#what-format-did-you-choose-to-use-for-your-inventory">What format did you choose to use for your inventory?</a>
</h3>
<p>INI. YAML seems to be the clear choice as it allows for a more declarative inventory. However, while working in the study group it was easier to edit INI without making indentation errors.</p>



<h3 id="what-other-things-might-you-include-later-in-your-inventory-to-make-it-more-useful">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu14/#what-other-things-might-you-include-later-in-your-inventory-to-make-it-more-useful">What other things might you include later in your inventory to make it more useful?</a>
</h3>
<p>I can add quite a few interesting things to an inventory file to make it more useful. Once the file reaches a certain size, it is better to break it out into separate unit files that are nested for things like Hosts, Host Variables, Production, Staging etc&hellip;</p>
<p>Some notable things I think make things pretty powerful are:</p>
<ul>
<li>Dynamic Inventorying</li>
<li>Vault encrypted secrets</li>
<li>Jinja2 Dynamic variables</li>
</ul>
<hr>



<h2 id="discussion-post-2">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu14/#discussion-post-2">Discussion Post 2:</a>
</h2>
<p>You have been noticing drift on your server configurations, so
you want a way to generate a report on them every day to validate the configurations are the
same.</p>
<ul>
<li>Use any lab in here to find ideas: <a href="https://killercoda.com/het-tanis/course/Ansible-">https://killercoda.com/het-tanis/course/Ansible-</a>
Labs Use this webhook to send your relevant data out to our sandbox.
<a href="https://discord.com/api/webhooks/1317659221604433951/uyKpuq8fNNNSEyCra4n33PakI">https://discord.com/api/webhooks/1317659221604433951/uyKpuq8fNNNSEyCra4n33PakI</a>
Bk-XtTn1WrwTpHs9BcgkIu7URPV_Gd5HJCRX0_EJVUT</li>
</ul>
<hr>
<ul>
<li>name: System Information Check
hosts: all
become: yes
tasks:
<ul>
<li>
<p>name: Check kernel version
command: uname -r
register: kernel_version</p>
</li>
<li>
<p>name: Display kernel version
debug:
msg: &ldquo;Kernel Version: {{ kernel_version.stdout }}&rdquo;</p>
</li>
<li>
<p>name: Display kernel command line
command: cat /proc/cmdline
register: kernel_cmdline</p>
</li>
<li>
<p>name: Debug kernel command line
debug:
msg: &ldquo;Kernel Command Line: {{ kernel_cmdline.stdout }}&rdquo;</p>
</li>
<li>
<p>name: Check hardware information
command: lshw
register: hardware_info</p>
</li>
<li>
<p>name: Debug hardware information
debug:
msg: &ldquo;Hardware Information: {{ hardware_info.stdout }}&rdquo;</p>
</li>
<li>
<p>name: List installed RPM packages
command: rpm -qa
register: installed_rpms</p>
</li>
<li>
<p>name: Debug installed RPM packages
debug:
msg: &ldquo;Installed RPMs: {{ installed_rpms.stdout }}&rdquo;</p>
</li>
<li>
<p>name: Check active services
command: systemctl list-units &ndash;type=service &ndash;state=running
register: active_services</p>
</li>
<li>
<p>name: Debug active services
debug:
msg: &ldquo;Active Services: {{ active_services.stdout }}&rdquo;</p>
</li>
<li>
<p>name: List system users
command: cat /etc/passwd
register: system_users</p>
</li>
<li>
<p>name: Debug system users
debug:
msg: &ldquo;System Users: {{ system_users.stdout }}&rdquo;</p>
</li>
<li>
<p>name: Check last login information
command: last
register: last_login</p>
</li>
<li>
<p>name: Debug last login information
debug:
msg: &ldquo;Last Login Information: {{ last_login.stdout }}&rdquo;</p>
</li>
<li>
<p>name: Display currently logged-in users
command: w
register: logged_in_users</p>
</li>
<li>
<p>name: Debug currently logged-in users
debug:
msg: &ldquo;Logged-in Users: {{ logged_in_users.stdout }}&rdquo;</p>
</li>
<li>
<p>name: Display ISO time
command: date &ndash;iso-8601=seconds
register: iso_time</p>
</li>
<li>
<p>name: Debug ISO time
debug:
msg: &ldquo;ISO Time: {{ iso_time.stdout }}&rdquo;</p>
</li>
</ul>
</li>
</ul>
<hr>



<h2 id="discussion-post-3">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu14/#discussion-post-3">Discussion Post 3:</a>
</h2>
<p>Using ansible module for git, pull down this repo: üëç
<a href="https://github.com/het-tanis/HPC_Deploy.git">https://github.com/het-tanis/HPC_Deploy.git</a></p>



<h3 id="how-is-the-repo-setup">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu14/#how-is-the-repo-setup">How is the repo setup?</a>
</h3>
<p>We have 3 playbooks in the root of the directory. These playbooks utilize roles defined in the roles subdirectory.
Playbook 01 gathers facts about nfs using roles defined in a subdirectory called roles.
Playbook 02 gathers data from a target system using roles defined in a subdirectory called data-gather.
Playbook 03 updates and installs using roles defined in a subdirectory called packages_update/tasks &amp; packages_install/tasks.</p>



<h3 id="what-is-in-the-roles-directory">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu14/#what-is-in-the-roles-directory">What is in the roles directory?</a>
</h3>
<p>Partially answered for the previous question.
Roles are structured with dedicated directories for tasks, handlers, and templates.</p>



<h3 id="how-are-these-playbooks-called-and-how-do-roles-differ-from-tasks">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu14/#how-are-these-playbooks-called-and-how-do-roles-differ-from-tasks">How are these playbooks called, and how do roles differ from tasks?</a>
</h3>
<p>These playbooks incorporate roles based on specific conditions, executing the tasks defined within each role. When a role is included, the playbook inherits all its contents.</p>
<hr>



<h2 id="digging-deeper">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu14/#digging-deeper">Digging Deeper</a>
</h2>



<h3 id="i-have-a-large-amount-of-labs-to-get-you-started-on-your-ansible-journey-all-free">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu14/#i-have-a-large-amount-of-labs-to-get-you-started-on-your-ansible-journey-all-free">I have a large amount of labs to get you started on your Ansible Journey (all free):</a>
</h3>
<p><a href="https://killercoda.com/het-tanis/course/Ansible-Labs">https://killercoda.com/het-tanis/course/Ansible-Labs</a> üëç</p>



<h3 id="find-projects-from-our-channel-ansible-code-in-discord-and-find-something-that-is">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu14/#find-projects-from-our-channel-ansible-code-in-discord-and-find-something-that-is">Find projects from our channel Ansible-Code, in Discord and find something that is</a>
</h3>
<p>interesting to you. üëç</p>



<h3 id="use-ansible-to-access-secrets-from-hashicorp-vault-httpskillercodacomhet-">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu14/#use-ansible-to-access-secrets-from-hashicorp-vault-httpskillercodacomhet-">Use Ansible to access secrets from Hashicorp Vault: <a href="https://killercoda.com/het-">https://killercoda.com/het-</a></a>
</h3>
<p>tanis/course/Hashicorp-Labs/004-vault-read-secrets-ansible üëç</p>
<hr>



<h1 id="lab-work---">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu14/#lab-work---">Lab Work üß™  üëç</a>
</h1>



<h3 id="create-an-inventory">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu14/#create-an-inventory">Create an inventory:</a>
</h3>
<ol>
<li>While still in the /root/ansible_madness directory, create a file hosts
vi /root/ansible_madness/hosts
Populate the file as follows</li>
</ol>
<p>[servers]</p>
<ul>
<li>192.168.200.101</li>
<li>192.168.200.102</li>
<li>192.168.200.103</li>
</ul>
<p>Run Ad Hoc commands against your servers
This will test your connection into all the servers.</p>



<h3 id="1-ansible-servers--i-hosts--u-inmate--k--m-shell--a-uptime">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu14/#1-ansible-servers--i-hosts--u-inmate--k--m-shell--a-uptime">1. ansible servers -i hosts -u inmate -k -m shell -a uptime</a>
</h3>
<p>Use this password: LinuxR0cks1!</p>
<p>Do the same thing, but this time be verbose</p>



<h3 id="2-ansible--vvv-servers--i-hosts--u-inmate--k--m-shell--a-uptime">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu14/#2-ansible--vvv-servers--i-hosts--u-inmate--k--m-shell--a-uptime">2. ansible -vvv servers -i hosts -u inmate -k -m shell -a uptime</a>
</h3>
<p>Create a playbook to push over files.</p>



<h3 id="3-echo-this-is-my-file-yourname--somefile">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu14/#3-echo-this-is-my-file-yourname--somefile">3. echo &ldquo;This is my file <!-- raw HTML omitted -->&rdquo; &gt; somefile</a>
</h3>



<h3 id="4-vi-deployyaml">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu14/#4-vi-deployyaml">4. vi deploy.yaml</a>
</h3>
<p>Populate it as follows:</p>
<pre><code>name: Start of push playbook

hosts: servers
vars:
gather_facts: True
become: False
tasks:
name: Copy somefile over at {{ ansible_date_time.iso8601_basic_short }}
copy:
src: /root/ansible_madness/somefile
dest: /tmp/somefile.txt
</code></pre>



<h3 id="5-execute-your-playbook">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu14/#5-execute-your-playbook">5. Execute your playbook</a>
</h3>
<p>ansible-playbook -i hosts -k deploy.yaml</p>



<h3 id="6-verify-that-your-file-pushed-everywhere">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu14/#6-verify-that-your-file-pushed-everywhere">6. Verify that your file pushed everywhere</a>
</h3>
<p>ansible servers -i hosts -u inmate -k -m shell -a ‚Äúls -l /tmp/somefile‚Äù
Pull down a github repo</p>
<ol>
<li>git clone <a href="https://github.com/het-tanis/HPC_Deploy.git">https://github.com/het-tanis/HPC_Deploy.git</a>
cd HPC_Deploy
What do you see in here?
What do you need to learn about more to deploy some of these tools?
Can you execute some of these, why or why not?</li>
</ol>
<hr>



<h2 id="reflection-questions">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu14/#reflection-questions">Reflection Questions</a>
</h2>
<ol>
<li>
<p>What questions do you still have about this week?</p>
</li>
<li>
<p>How can you apply this now in your current role in IT? If you‚Äôre not in IT, how can you
look to put something like this into your resume or portfolio?</p>
</li>
</ol>
<hr>



<h3 id="prolug-links-">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu14/#prolug-links-">ProLUG Links ‚õìÔ∏è</a>
</h3>
<p>Discord: <a href="https://discord.com/invite/m6VPPD9usw">https://discord.com/invite/m6VPPD9usw</a>
Youtube: <a href="https://www.youtube.com/@het_tanis8213">https://www.youtube.com/@het_tanis8213</a>
Twitch: <a href="https://www.twitch.tv/het_tanis">https://www.twitch.tv/het_tanis</a>
ProLUG Book: <a href="https://leanpub.com/theprolugbigbookoflabs">https://leanpub.com/theprolugbigbookoflabs</a>
KillerCoda: <a href="https://killercoda.com/het-tanis">https://killercoda.com/het-tanis</a></p>
      
      

  

  





  <footer>
    
      
        <ul class="Tags">
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/categories/learning/" rel="tag">Learning</a>
            </li>
          
        </ul>
      
    
      
        <ul class="Tags">
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/tech/" rel="tag">Tech</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/linux/" rel="tag">Linux</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/administration/" rel="tag">Administration</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/engineering/" rel="tag">Engineering</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/prolug-course/" rel="tag">ProLUG Course</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/operating-systems/" rel="tag">Operating Systems</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/declaritive/" rel="tag">Declaritive</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/configuration/" rel="tag">Configuration</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/ansible/" rel="tag">Ansible</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/iac/" rel="tag">IaC</a>
            </li>
          
        </ul>
      
    
  </footer>

    </article>
    
      <div class="Divider"></div>
    
  
    <article>
      <header class="Heading">
  <h1 class="Heading-title">
    <a class="Heading-link u-clickable" href="/techblog/post/pacu13/" rel="bookmark">ProLUG Admin Course Unit 13 üêß</a>
  </h1>
  
    <time datetime="2024-12-15T00:00:00Z">December 15, 2024</time>
  
</header>
      
        <h1 id="system-hardening">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu13/#system-hardening">System Hardening</a>
</h1>
<p>Linux system hardening involves securing the system by reducing its attack surface through measures such as disabling unnecessary services, enforcing access controls, applying security patches, and using tools like OpenSCAP, STIG compliance frameworks, or the OSCAP Scanner. These tools help automate security audits, enforce compliance standards, and identify vulnerabilities to enhance system security.</p>
<hr>



<h2 id="discussion-post-1">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu13/#discussion-post-1">Discussion Post 1:</a>
</h2>
<p>Your security team comes to you with a discrepancy between
the production security baseline and something that is running on one of your servers in
production. There are 5 servers in a web cluster and only one of them is showing this
behavior. They want you to account for why something is different.</p>



<h3 id="how-are-you-going-to-validate-that-the-difference-between-the-systems">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu13/#how-are-you-going-to-validate-that-the-difference-between-the-systems">How are you going to validate that the difference between the systems?</a>
</h3>
<p>I am going to assume that I am new to the system in general and have very surface knowledge from fellow staff. I am also assuming we are working with a redhat based system.</p>



<h4 id="starting-off-simple">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu13/#starting-off-simple">Starting off simple</a>
</h4>
<p>Maybe the problem is an obvious one, so I would just start off with a glance.</p>
<ul>
<li>Quick cursory check (Kernel Version uname-a)</li>
<li>Manually Checking Logs (Journalctl, dmesg, audit.log, syslog)</li>
<li>Checking ports (Socket Statistics, ss -ntulp)</li>
<li>Listing installed packages (DNF list, RPM -qa)</li>
<li>Listing users and Logins (/etc/passwd, w, last)</li>
<li>Seeing what System D services are running (systemctl list-units - -type=service)</li>
<li>Digging for documentation and or commit history</li>
</ul>



<h4 id="deeper-">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu13/#deeper-">Deeper ‚õèÔ∏è</a>
</h4>
<p>If no low hanging fruit were there, then I would check configurations</p>
<ul>
<li>Grub.conf, FirewallD/Apparmour, SELinux,</li>
</ul>



<h4 id="sorting-ish-from-">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu13/#sorting-ish-from-">Sorting ü™∞&lsquo;ish from üå∂Ô∏è</a>
</h4>
<p>If I do that see something distinctly different, I would employ a more sophisticated approach with difference checking.
Given that everything is a structured file, I can append the output from a working system and the goose ü™ø to a new file and run diff against them.</p>
<ul>
<li>Diff&rsquo;ing the Logs</li>
<li>Diff&rsquo;ing Socket Statistics</li>
<li>Diff&rsquo;ing Installed Packages</li>
</ul>



<h3 id="what-are-you-going-to-look-at-to-explain-this">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu13/#what-are-you-going-to-look-at-to-explain-this">What are you going to look at to explain this?</a>
</h3>
<p>I think I have answered this above.</p>



<h3 id="what-could-be-done-to-prevent-this-problem-in-the-future">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu13/#what-could-be-done-to-prevent-this-problem-in-the-future">What could be done to prevent this problem in the future?</a>
</h3>
<ul>
<li>Introducing or Improving the change management policy and employing version control would be my first suggestion.</li>
<li>Ensuring that there is a build/test/deploy pipeline that integrates tightly with change management.</li>
<li>Using IaC and Automation to ensure consistency and repeatability with tools like Ansible, Packer, Podman or Kubernetes.</li>
<li>Hardening systems with either simple policies or through the guidance of STIG&rsquo;s.</li>
<li>Introducing stronger controls over user privileges like employing RBA policies.</li>
</ul>
<hr>



<h2 id="discussion-post-2">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu13/#discussion-post-2">Discussion Post 2:</a>
</h2>
<p>Your team has been giving you more and more engineering
responsibilities. You are being asked to build out the next set of servers to integrate into the
development environment. Your team is going from RHEL 8 to Rocky 9.4.</p>



<h3 id="how-might-you-start-to-plan-out-your-migration">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu13/#how-might-you-start-to-plan-out-your-migration">How might you start to plan out your migration?</a>
</h3>



<h4 id="observe">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu13/#observe">Observe</a>
</h4>
<p>Firstly I would gather system information</p>
<ul>
<li>Benchmark/baseline performance metrics and utilization (Disk, I/O, PS, Connections etc)</li>
<li>Configs (Scripts and configuration files)</li>
<li>Installed Packages.</li>
<li>users (Listing users and privileges)</li>
<li>Policies (Firewall, SELinux)</li>
<li>Purpose (Assessing the use of a particular system to see if may need changes/upgrades)</li>
</ul>



<h4 id="capture">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu13/#capture">Capture</a>
</h4>
<ul>
<li>I would snapshot the current system if possible</li>
<li>If a complete snapshot copy is not possible, I would gather files essential to rebuilding a replica</li>
</ul>



<h4 id="reconstruct">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu13/#reconstruct">Reconstruct</a>
</h4>
<ul>
<li>Build it in a test VM emulating the current environment</li>
<li>Template the VM for experimental changes (Adding additional tools or Configs)</li>
</ul>



<h4 id="analyze--optimize">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu13/#analyze--optimize">Analyze / Optimize</a>
</h4>
<ul>
<li>Gather business or operational requirements, perhaps the system needs enhancements</li>
<li>Experiment with performance tuning</li>
<li>Test new packages and/or configurations</li>
</ul>



<h4 id="build">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu13/#build">Build</a>
</h4>
<p>During the analysis and optimization phase, I would start a playbook with information gathered from previous phases.
I would build and run the playbook against VM templates until satisfied.</p>



<h4 id="deploy">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu13/#deploy">Deploy</a>
</h4>
<p>Given the prior phases, my Playbook would be robust and capable of the transition.
However, I would ensure a robust backup and rollback plan in the case something fails.</p>



<h3 id="what-are-you-going-to-check-on-the-existing-systems-to-baseline-your-build">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu13/#what-are-you-going-to-check-on-the-existing-systems-to-baseline-your-build">What are you going to check on the existing systems to baseline your build?</a>
</h3>
<ol>
<li><strong>Compute Usage</strong></li>
<li><strong>Memory Load</strong></li>
<li><strong>Disk Resources</strong></li>
<li><strong>Networking Metrics</strong></li>
</ol>



<h3 id="what-kind-of-validation-plan-might-you-use-for-your-new-rocky-94-systems">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu13/#what-kind-of-validation-plan-might-you-use-for-your-new-rocky-94-systems">What kind of validation plan might you use for your new Rocky 9.4 systems?</a>
</h3>
<p>I would have a seperate playbook built that would validate performance against what I was observing during my VM experimentation.
Though the environment may differ from that of the VM, I would still be able to discern performance characteristics and notice any outlier differences.</p>
<hr>



<h2 id="digging-deeper">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu13/#digging-deeper">Digging Deeper</a>
</h2>
<ol>
<li>Run through this lab: <a href="https://killercoda.com/het-tanis/course/Linux-Labs/107-server-startup-process">https://killercoda.com/het-tanis/course/Linux-Labs/107-server-startup-process</a> üëç</li>
</ol>



<h3 id="how-does-this-help-you-better-understand-the-discussion-13-2-question">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu13/#how-does-this-help-you-better-understand-the-discussion-13-2-question">How does this help you better understand the discussion 13-2 question?</a>
</h3>
<p>Well when I am gathering a picture of my current security baseline, I can use some of these tools like dmesg and ss to see what possible attack surface I may have.</p>
<ol start="2">
<li>Run through this lab: <a href="https://killercoda.com/het-tanis/course/Linux-Labs/203-updating-golden-image">https://killercoda.com/het-tanis/course/Linux-Labs/203-updating-golden-image</a> üëç</li>
</ol>



<h3 id="how-does-this-help-you-better-understand-the-process-of-hardening-systems">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu13/#how-does-this-help-you-better-understand-the-process-of-hardening-systems">How does this help you better understand the process of hardening systems?</a>
</h3>
<hr>



<h2 id="reflection-questions">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu13/#reflection-questions">Reflection Questions</a>
</h2>
<ol>
<li>
<p>What questions do you still have about this week?</p>
</li>
<li>
<p>How can you apply this now in your current role in IT? If you‚Äôre not in IT, how can you
look to put something like this into your resume or portfolio?</p>
</li>
</ol>
<hr>



<h1 id="lab-work-">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu13/#lab-work-">Lab Work üß™</a>
</h1>



<h3 id="1-you-will-scan-a-server-for-a-scc-report-and-get-a-stig-score-">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu13/#1-you-will-scan-a-server-for-a-scc-report-and-get-a-stig-score-">1. You will scan a server for a SCC Report and get a STIG Score üëç</a>
</h3>



<h3 id="2-you-will-remediate-some-of-the-items-from-the-scan-">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu13/#2-you-will-remediate-some-of-the-items-from-the-scan-">2. You will remediate some of the items from the scan üëç</a>
</h3>



<h3 id="3-you-will-rescan-and-verify-a-better-score-">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu13/#3-you-will-rescan-and-verify-a-better-score-">3. You will rescan and verify a better score. üëç</a>
</h3>
<hr>



<h3 id="prolug-links-">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu13/#prolug-links-">ProLUG Links ‚õìÔ∏è</a>
</h3>
<p>Discord: <a href="https://discord.com/invite/m6VPPD9usw">https://discord.com/invite/m6VPPD9usw</a>
Youtube: <a href="https://www.youtube.com/@het_tanis8213">https://www.youtube.com/@het_tanis8213</a>
Twitch: <a href="https://www.twitch.tv/het_tanis">https://www.twitch.tv/het_tanis</a>
ProLUG Book: <a href="https://leanpub.com/theprolugbigbookoflabs">https://leanpub.com/theprolugbigbookoflabs</a>
KillerCoda: <a href="https://killercoda.com/het-tanis">https://killercoda.com/het-tanis</a></p>
      
      

  

  





  <footer>
    
      
        <ul class="Tags">
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/categories/learning/" rel="tag">Learning</a>
            </li>
          
        </ul>
      
    
      
        <ul class="Tags">
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/tech/" rel="tag">Tech</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/linux/" rel="tag">Linux</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/administration/" rel="tag">Administration</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/engineering/" rel="tag">Engineering</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/prolug-course/" rel="tag">ProLUG Course</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/operating-systems/" rel="tag">Operating Systems</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/stig/" rel="tag">STIG</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/system-hardening/" rel="tag">System Hardening</a>
            </li>
          
        </ul>
      
    
  </footer>

    </article>
    
      <div class="Divider"></div>
    
  
    <article>
      <header class="Heading">
  <h1 class="Heading-title">
    <a class="Heading-link u-clickable" href="/techblog/post/pacu12/" rel="bookmark">ProLUG Admin Course Unit 12 üêß</a>
  </h1>
  
    <time datetime="2024-11-30T00:00:00Z">November 30, 2024</time>
  
</header>
      
        <h1 id="baselining--benchmarking">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu12/#baselining--benchmarking">Baselining &amp; Benchmarking</a>
</h1>
<p>The purpose of a baseline is not to find fault, load, or to take corrective action. A baseline simply
determines what is. You must know what is so that you can test against that when you make a change to
be able to objectively say there was or wasn&rsquo;t an improvement. You must know where you are at to be
able to properly plan where you are going. A poor baseline assessment, because of inflated numbers or
inaccurate testing, does a disservice to the rest of your project. You must accurately draw the first line
and understand your system&rsquo;s performance.</p>
<hr>



<h2 id="discussion-post-1">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu12/#discussion-post-1">Discussion Post 1:</a>
</h2>
<p>Your manager has come to you with another emergency. He has a meeting next week to discuss capacity planning and usage of the system with IT upper management. He doesn‚Äôt want to lose his budget, but he has to prove that the system utilization warrants spending more.</p>
<ul>
<li>What information can you show your manager from your systems?</li>
</ul>
<p>You could present your manager with a progressive trend graph showing time on the x-axis and several fields on the y-axis that represent changes from a baseline, assuming the necessary data has been collected. With this information, it would be possible to predict when various system resources will reach their maximum capacity.</p>
<ul>
<li>
<p>What type of data would prove system utilization? (Remember the big 4: compute, memory, disk, networking)</p>
<p>CPU load, process execution time, throughput.
Disk Operations (IOPS).
Networking Requests and Bandwidth.
RAM utilization, memory paging/swapping rates.</p>
</li>
<li>
<p>What would your report look like to your manager?</p>
</li>
</ul>



<h1 id="capacity-planning-report">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu12/#capacity-planning-report">Capacity Planning Report</a>
</h1>
<p>Current and projected system utilization. By examining trends over time, we can predict when critical resources will reach their limits if no additional capacity is provisioned.</p>



<h2 id="key-areas-of-focus">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu12/#key-areas-of-focus">Key Areas of Focus</a>
</h2>
<ol>
<li><strong>Compute Usage</strong></li>
<li><strong>Memory Load</strong></li>
<li><strong>Disk Resources</strong></li>
<li><strong>Networking Metrics</strong></li>
</ol>



<h2 id="historical-data-and-trends">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu12/#historical-data-and-trends">Historical Data and Trends</a>
</h2>
<p>Below is a sample progressive trend graph over the last 6 months. The x-axis represents time (in weeks), while the y-axis shows percentage utilization relative to an established baseline.</p>
<p><strong>Example Metrics (relative to baseline):</strong></p>
<ul>
<li>
<p><strong>CPU Utilization (% of baseline)</strong></p>
</li>
<li>
<p><strong>Memory Load (% of baseline)</strong></p>
</li>
<li>
<p><strong>Disk IOPS (% of baseline)</strong></p>
</li>
<li>
<p><strong>Network Throughput (% of baseline)</strong></p>
<p>Time (Weeks):    1   2   3   4   5   6   ‚Ä¶   20   21   22
CPU Util(%):    50  52  55  57  60  62   ‚Ä¶   80   82   85
Memory(%):      45  47  50  50  52  55   ‚Ä¶   70   73   75
Disk IOPS(%):   30  32  35  36  38  40   ‚Ä¶   60   63   68
Network(%):     40  42  45  47  49  51   ‚Ä¶   75   78   80</p>
</li>
</ul>
<p>As time progresses, each of the key metrics is trending upward, indicating increasing load and approaching capacity thresholds.</p>



<h2 id="projections">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu12/#projections">Projections</a>
</h2>
<p>We can estimate the ‚Äútime to ceiling‚Äù for critical resources. For instance, if CPU load is rising at an average rate of 2‚Äì3% per month, and we know that at 90% utilization the system will experience performance degradation.</p>
<p><strong>Projected Time to CPU Ceiling:</strong> 3‚Äì5 months<br>
<strong>Projected Time to Memory Ceiling:</strong> 6‚Äì8 months<br>
<strong>Projected Time to Disk IOPS Ceiling:</strong> 8‚Äì10 months<br>
<strong>Projected Time to Network Bandwidth Ceiling:</strong> 4‚Äì6 months</p>



<h2 id="recommendations">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu12/#recommendations">Recommendations</a>
</h2>
<ul>
<li><strong>Compute</strong>: Consider adding more CPU cores or upgrading processors before reaching the predicted 90% utilization mark.</li>
<li><strong>Memory</strong>: Upgrade RAM or optimize applications to reduce memory footprint.</li>
<li><strong>Disk</strong>: Enhance disk subsystems or switch to faster storage (e.g., SSDs) to handle projected IOPS.</li>
<li><strong>Networking</strong>: Increase network capacity (e.g., from 1Gb to 10Gb links) or optimize network traffic.</li>
</ul>



<h2 id="conclusion">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu12/#conclusion">Conclusion</a>
</h2>
<p>Investment in scaling resources now will prevent future performance bottlenecks, ensuring the system can continue to meet business demands effectively.</p>
<hr>



<h2 id="discussion-post-2">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu12/#discussion-post-2">Discussion Post 2:</a>
</h2>
<p>You are in a capacity planning meeting with a few of the architects. They have decided to add 2 more agents to your Linux Sytems, Bacula Agent and an Avamar Agent . They expect these agents to run their work starting at 0400 every morning.</p>
<ul>
<li>What do these agents do? (May have to look them up)</li>
</ul>
<p>Bacula is an open-source suite of tools designed to automate backup tasks. It‚Äôs widely regarded for its flexibility and reliability. Dell Avamar, on the other hand, is a commercial backup automation solution. Both tools handle incremental backups using custom daemons that monitor changes over time, offering greater sophistication than simple scheduling systems like Cron. Additionally, they can manage backups across diverse, heterogeneous storage environments.</p>
<ul>
<li>Do you think there is a good reason not to use these agents at this timeframe?</li>
</ul>
<p>This approach is about balancing workload. If all processes start at a fixed time, they can consume valuable resources simultaneously. The best schedule depends on the environment. For example, if the environment experiences downtime‚Äîsuch as a traditional office setting‚Äîstarting backups at 4 a.m. might be fine. However, if services run around the clock, it‚Äôs better to stagger the tasks so they use only a fraction of the available resources at any given time. This approach also reduces the impact of failures, since not all systems are involved at once.</p>
<ul>
<li>Is there anything else you might want to point out to these architects about these agents they are installing?</li>
</ul>
<p>There are several factors architects should consider. However, in the context of this discussion, performance overhead is particularly relevant. They need to ensure that the chosen backup solutions won‚Äôt overburden the system‚Äôs resources and that there‚Äôs enough ‚Äúbreathing room‚Äù to maintain smooth operations.</p>
<hr>



<h2 id="discussion-post-3-todo">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu12/#discussion-post-3-todo">Discussion Post 3: &lsquo;TODO&rsquo;</a>
</h2>
<p>Your team has recently tested at proof of concept of a new storage system. The vendor has published the blazing fast speeds that are capable of being run through this storage system. You have a set of systems connected to both the old storage system and the new storage system.</p>
<ul>
<li>Write up a test procedure of how you may test these two systems.</li>
</ul>
<p>I did a bit of research regarding tooling for such a task and found FIO &lsquo;Flexible Input / Output&rsquo;, a program written for the purpose of testing systems with various scenarios.
Rather than using BASH, I can run more comprehensive testing with more data to analyze using FIO.</p>



<h3 id="baseline-test">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu12/#baseline-test">Baseline Test</a>
</h3>
<pre><code> fio --filename=/dev/new_storage_lun --direct=1 --rw=read --bs=128k --size=10G --numjobs=1 --iodepth=32 --runtime=300 --time_based --name=new_storage_seq_read
 fio --filename=/dev/old_storage_lun --direct=1 --rw=read --bs=128k --size=10G --numjobs=1 --iodepth=32 --runtime=300 --time_based --name=old_storage_seq_read
</code></pre>



<h3 id="running-mixed-workload-tests">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu12/#running-mixed-workload-tests">Running Mixed Workload Tests</a>
</h3>
<pre><code> fio --filename=/dev/new_storage_lun --direct=1 --rw=randrw --rwmixread=70 --bs=4k --size=10G --numjobs=4 --iodepth=16 --runtime=300 --time_based --name=new_storage_mixed
</code></pre>



<h3 id="increased-concurrency-and-scale">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu12/#increased-concurrency-and-scale">Increased Concurrency and Scale</a>
</h3>
<ul>
<li>
<p>Increase <code>numjobs</code> and <code>iodepth</code> in subsequent runs to measure how performance changes:</p>
<p>fio &ndash;filename=/dev/new_storage_lun &ndash;direct=1 &ndash;rw=read &ndash;bs=128k &ndash;size=10G &ndash;numjobs=8 &ndash;iodepth=64 &ndash;runtime=300 &ndash;time_based &ndash;name=new_storage_high_concurrency</p>
</li>
<li>
<p>Run the same tests on the old storage system and record all metrics.</p>
</li>
</ul>



<h3 id="stresssoak-tests">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu12/#stresssoak-tests">Stress/Soak Tests</a>
</h3>
<ul>
<li>
<p>12-hour continuous I/O test on both storage systems.</p>
<p>fio &ndash;filename=/dev/new_storage_lun &ndash;direct=1 &ndash;rw=randwrite &ndash;bs=4k &ndash;size=100G &ndash;numjobs=1 &ndash;iodepth=32 &ndash;runtime=43200 &ndash;time_based &ndash;name=new_storage_soak</p>
</li>
</ul>



<h3 id="awk-line-parsing">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu12/#awk-line-parsing">AWK Line Parsing</a>
</h3>
<p>I would then pipe the output of these commands to <strong>AWK</strong> to seperate out specific datapoints to append to files for full analysis.</p>
<ul>
<li>How are you assuring these test are objective?</li>
</ul>
<p>By gathering multiple datasets with varying run parameters, I can reduce statistical noise and better isolate data of interest by comparing these datasets against one another.</p>
<ul>
<li>What is meant by the term Ceteris Paribus, in this context?</li>
</ul>
<p>in the context of system benchmarking means that when measuring the performance of one specific aspect of the system, all other variables and conditions are kept constant. This approach ensures that any observed changes in performance can be attributed directly to the variable under test, rather than being influenced by unrelated fluctuations in the environment or system load.</p>
<hr>



<h2 id="definitions--terminology">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu12/#definitions--terminology">Definitions &amp; Terminology</a>
</h2>
<ul>
<li>Benchmark</li>
<li>High watermark</li>
<li>Scope</li>
<li>Methodology</li>
<li>Testing</li>
<li>Control</li>
<li>Experiment</li>
<li>Analytics</li>
<li>Descriptive</li>
<li>Diagnostic</li>
<li>Predictive</li>
<li>Prescriptive</li>
</ul>



<h2 id="digging-deeper-optional">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu12/#digging-deeper-optional">Digging Deeper (optional)</a>
</h2>
<ol>
<li>Analyzing data may open up a new field of interest to you. Go through some of the
free lessons on Kaggle, here: <a href="https://www.kaggle.com/learn">https://www.kaggle.com/learn</a></li>
</ol>
<p>a. What did you learn?</p>
<p>b. How will you apply these lessons to data and monitoring you have already
collected as a system administrator?</p>
<ol start="2">
<li>Find a blog or article that discusses the 4 types of data analytics.</li>
</ol>
<p>a. What did you learn about past operations?
b. What did you learn about predictive operations?</p>
<ol start="3">
<li>Download Spyder IDE (Open source)</li>
</ol>
<p>a. Find a blog post or otherwise try to evaluate some data.
b. Perform some Linear regression. My block of code (but this requires some
additional libraries to be added. I can help with that if you need it.)</p>
<p>import matplotlib.pyplot as plt</p>
<p>from sklearn.linear_model import LinearRegression</p>
<p>size = [[5.0], [5.5], [5.9], [6.3], [6.9], [7.5]]
price =[[165], [200], [223], [250], [278], [315]]
plt.title(&lsquo;Pizza Price plotted against the size&rsquo;)</p>
<p>plt.xlabel(&lsquo;Pizza Size in inches&rsquo;)</p>
<p>plt.ylabel(&lsquo;Pizza Price in cents&rsquo;)</p>
<p>plt.plot(size, price, &lsquo;k.&rsquo;)</p>
<p>plt.axis([5.0, 9.0, 99, 355])</p>
<p>plt.grid(True)</p>
<p>model = LinearRegression()</p>
<p>model.fit(X = size, y = price)</p>
<p>#plot the regression line</p>
<p>plt.plot(size, model.predict(size), color=&lsquo;r&rsquo;)</p>
<p>Reflection Questions</p>
<ol>
<li>
<p>What questions do you still have about this week?</p>
</li>
<li>
<p>How can you apply this now in your current role in IT? If you‚Äôre not in IT, how can you
look to put something like this into your resume or portfolio?</p>
</li>
</ol>
<hr>



<h2 id="digging-deeper">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu12/#digging-deeper">Digging Deeper</a>
</h2>



<h4 id="1-read-the-rest-of-the-chapter-httpssregoogleworkbookmonitoring-and-note-anything-else-of-interest-when-it-comes-to-monitoring-and-dashboarding">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu12/#1-read-the-rest-of-the-chapter-httpssregoogleworkbookmonitoring-and-note-anything-else-of-interest-when-it-comes-to-monitoring-and-dashboarding">1. Read the rest of the chapter <a href="https://sre.google/workbook/monitoring/">https://sre.google/workbook/monitoring/</a> and note anything else of interest when it comes to monitoring and dashboarding.</a>
</h4>



<h4 id="2-look-up-the-prolug-prometheus-certified-associate-prep-2024-in-resources---presentations-in-our-prolug-discord-study-that-for-a-deep-dive-into-prometheus">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu12/#2-look-up-the-prolug-prometheus-certified-associate-prep-2024-in-resources---presentations-in-our-prolug-discord-study-that-for-a-deep-dive-into-prometheus">2. Look up the ‚ÄúProLUG Prometheus Certified Associate Prep 2024‚Äù in Resources -&gt; Presentations in our ProLUG Discord. Study that for a deep dive into Prometheus.</a>
</h4>



<h4 id="3-complete-the-project-section-of-monitoring-deep-dive-project-guide-from-the-prolug-projects-section-of-the-discord-we-have-a-youtube-video-on-that-project-as-well-httpswwwyoutubecomwatchv54vgghr99qg">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu12/#3-complete-the-project-section-of-monitoring-deep-dive-project-guide-from-the-prolug-projects-section-of-the-discord-we-have-a-youtube-video-on-that-project-as-well-httpswwwyoutubecomwatchv54vgghr99qg">3. Complete the project section of ‚ÄúMonitoring Deep Dive Project Guide‚Äù from the prolug-projects section of the Discord. We have a Youtube video on that project as well. <a href="https://www.youtube.com/watch?v=54VgGHr99Qg">https://www.youtube.com/watch?v=54VgGHr99Qg</a></a>
</h4>



<h2 id="labs">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu12/#labs">Labs</a>
</h2>
<p><a href="https://killercoda.com/het-tanis/course/Linux-Labs/102-monitoring-linux-logs">https://killercoda.com/het-tanis/course/Linux-Labs/102-monitoring-linux-logs</a></p>
<p><a href="https://killercoda.com/het-tanis/course/Linux-Labs/103-monitoring-linux-telemetry">https://killercoda.com/het-tanis/course/Linux-Labs/103-monitoring-linux-telemetry</a></p>
<p><a href="https://killercoda.com/het-tanis/course/Linux-Labs/104-monitoring-linux-Influx-Grafana">https://killercoda.com/het-tanis/course/Linux-Labs/104-monitoring-linux-Influx-Grafana</a></p>
<ol start="2">
<li>While completing each lab think about the following:</li>
</ol>
<p>a. How does it tie into the diagram below?</p>
<p>b. What could you improve, or what would you change based on your previous administration
experience.</p>
<p>Install Grafana
on the Rocky Linux system by adding the Grafana repo manually.
Red = Inputs
Blue = Outputs</p>
<ol>
<li>Create a new repository configuration
sudo vim /etc/yum.repos.d/grafana.repo</li>
</ol>
<p>Paste:</p>
<p>[grafana]
name=grafana
baseurl=https://packages.grafana.com/oss/rpm <br>
repo_gpgcheck=1
enabled=1
gpgcheck=1
gpgkey=https://packages.grafana.com/gpg.key
sslverify=1</p>
<ol start="2">
<li>Verify using the DNF</li>
</ol>
<p>sudo dnf repolist</p>
<p>sudo dnf clean - verifies whether files are working</p>
<p>Should see:</p>
<p>repo id                                      repo name
appstream                               Rocky Linux 8 - AppStream
baseos                                      Rocky Linux 8 - BaseOS
extras                                       Rocky Linux 8 - Extras
grafana                                    grafana/spl</p>
<ol start="3">
<li>Check the grafana package on the official repository</li>
</ol>
<p>sudo dnf info grafana</p>
<p>Should see something similar üëÄ</p>
<p>Importing GPG key 0x24098CB6:
Userid     : &ldquo;Grafana &quot;
Fingerprint: 4E40 DDF6 D76E 284A 4A67 80E4 8C8C 34C5 2409 8CB6
From       : <a href="https://packages.grafana.com/gpg.key">https://packages.grafana.com/gpg.key</a>
Is this ok [y/N]: y</p>
<p>Should see üëÄ</p>
<p>Name         : grafana
Version      : 8.2.5
Release      : 1
rchitecture : x86_64
Size         : 64 M
Source       : grafana-8.2.5-1.src.rpm
Repository   : grafana
Summary      : Grafana
URL          : <a href="https://grafana.com">https://grafana.com</a>
License      : &ldquo;Apache 2.0&rdquo;
Description  : Grafana</p>
<ol start="4">
<li>Install Grafana
sudo dnf install grafana -y</li>
</ol>
<p>‚è≥ Takes a while&hellip;</p>
<ol start="5">
<li>Restart SystemD unit
sudo systemctl enable &ndash;now grafana-server</li>
</ol>
<p>Verify
sudo systemctl status grafana-server</p>
<p>5.5. Firewall (Security)
Firewall is Managed by files present in /etc/firedwalld</p>
<p>cd /etc/firewalld/
ls -l</p>
<p>cp /usr/lib/firewalld/services/ssh.xml  /etc/firewalld/services/example.xml</p>
<p>sudo  firewall-cmd &ndash;add-service=grafana &ndash;permanent</p>
<p>sudo firewall-cmd &ndash;add-port=3000/tcp &ndash;permanent
sudo firewall-cmd &ndash;reload</p>
<ol start="6">
<li>
<p>Create config file
sudo vim /etc/grafana/grafana.ini</p>
</li>
<li>
<p>Change the default value of:</p>
</li>
</ol>
<p>The option &lsquo;http_addr&rsquo; to &rsquo;localhost&rsquo;, the &lsquo;http_port&rsquo; to &lsquo;3000&rsquo;, and the &lsquo;domain&rsquo; option to your domain name as below. For this example, the domain name is &lsquo;grafana.example.io&rsquo;.</p>
<p>For non-standard port, be sure to uncomment ;
[server] üëç
http_port = 4000 üëç</p>
<p>The public facing domain name used to access grafana from a browser
domain = grafana.example.io</p>
<p>7.1 Turn off the nasty default report of analytics üë∫
[analytics]
reporting_enabled = false</p>
<p>7.2. Restart the grafana service to apply a new configuration.</p>
<p>sudo systemctl restart grafana-server</p>
<p>Reverse Proxy Setup</p>
<ol>
<li>Install NGINX</li>
</ol>
<p>sudo dnf install nginx -y</p>
<ol start="2">
<li>Create a new server block for grafana</li>
</ol>
<p>/etc/nginx/conf.d/grafana.conf</p>
<p>Required to proxy Grafana Live WebSocket connections</p>
<p>map $http_upgrade $connection_upgrade {
default upgrade;
&rsquo;&rsquo; close;
}
server {
listen      80;
server_name grafana.example.io;
rewrite     ^   https://$server_name$request_uri? permanent;
}
server {
listen      443 ssl http2;
server_name grafana.example.io;
root /usr/share/nginx/html;
index index.html index.htm;
ssl_certificate /etc/letsencrypt/live/grafana.example.io/fullchain.pem;
ssl_certificate_key /etc/letsencrypt/live/grafana.example.io/privkey.pem;
access_log /var/log/nginx/grafana-access.log;
error_log /var/log/nginx/grafana-error.log;
location / {
proxy_pass http://localhost:3000/;
}</p>
<p>Proxy Grafana Live WebSocket connections
location /api/live {
rewrite  ^/(.*)  /$1 break;
proxy_http_version 1.1;
proxy_set_header Upgrade $http_upgrade;
proxy_set_header Connection $connection_upgrade;
proxy_set_header Host $http_host;
proxy_pass http://localhost:3000/;
}
}</p>
<ol start="3">
<li>Next, verify the Nginx configuration</li>
</ol>
<p>sudo nginx -t</p>
<p>Should see üëÄ</p>
<p>nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful üëç</p>
<ol start="4">
<li>Start and enable the Nginx service
sudo systemctl enable &ndash;now nginx
sudo systemctl status nginx</li>
</ol>
<p>Install Prometheus (Saturday)</p>



<h2 id="rocky-prometheus-install">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu12/#rocky-prometheus-install">Rocky Prometheus Install</a>
</h2>
<ol>
<li>Add New User and Directory &lsquo;prometheus&rsquo;</li>
</ol>
<p>create a new configuration directory and data directory for the Prometheus installation.</p>
<p>sudo adduser -M -r -s /sbin/nologin prometheus</p>
<ol start="2">
<li>create a new configuration
directory &lsquo;/etc/prometheus&rsquo; and the data directory &lsquo;/var/lib/prometheus&rsquo;</li>
</ol>
<p>(Only needed for running as service)</p>
<p>sudo mkdir /etc/prometheus
sudo mkdir /var/lib/prometheus</p>
<p>Note:
All Prometheus configuration at the &lsquo;/etc/prometheus&rsquo; directory, and all Prometheus data will automatically be saved to the directory &lsquo;/var/lib/prometheus&rsquo;.
Installing Prometheus on Rocky Linux</p>
<p>Install Prometheus monitoring system manually from the tarball or tar.gz file.</p>
<ol>
<li>Change the working directory
to &lsquo;/usr/src&rsquo; and download the Prometheus binary</li>
</ol>
<p>cd /usr/src
wget <a href="https://github.com/prometheus/prometheus/releases/download/v3.0.1/prometheus-3.0.1.linux-amd64.tar.gz">https://github.com/prometheus/prometheus/releases/download/v3.0.1/prometheus-3.0.1.linux-amd64.tar.gz</a></p>
<p>Extract</p>
<p>tar -xzf ***.tar.gz</p>
<p>cd into folder</p>
<p>Run bin:</p>
<pre><code>./bin üëç

If bin works, proceed
</code></pre>
<ol start="2">
<li>Copy all Prometheus configurations
to the directory &lsquo;/etc/prometheus&rsquo; and the binary file &lsquo;prometheus&rsquo; to the &lsquo;/usr/local/bin&rsquo; directory.</li>
</ol>
<ul>
<li>Move prometheus configuration &lsquo;prometheus.yml&rsquo; to the directory &lsquo;/etc/prometheus.</li>
</ul>
<p>sudo mv $PROM_SRC/prometheus.yml /etc/prometheus/</p>
<ul>
<li>Move the binary file &lsquo;prometheus&rsquo; and &lsquo;promtool&rsquo; to the directory &lsquo;/usr/local/bin/&rsquo;.</li>
</ul>
<p>sudo mv $PROM_SRC/prometheus /usr/local/bin/
sudo mv $PROM_SRC/promtool /usr/local/bin/</p>
<ul>
<li>Move Prometheus console templates and libraries to the &lsquo;/etc/prometheus&rsquo; directory.</li>
</ul>
<p>sudo mv -r $PROM_SRC/consoles /etc/prometheus
sudo mv -r $PROM_SRC/console_libraries /etc/prometheus</p>
<ol start="3">
<li>Edit Prometheus configuration &lsquo;/etc/prometheus/prometheus.yml&rsquo;</li>
</ol>
<p>vim /etc/prometheus/prometheus.yml</p>
<p>On the &lsquo;scrape_configs&rsquo; option, you may need to add monitoring jobs</p>
<p>The default configuration comes with the default monitoring job name &lsquo;prometheus&rsquo; and the target server &rsquo;localhost&rsquo; through the &lsquo;static_configs&rsquo; option.</p>
<p>Change the target from &rsquo;localhost:9090&rsquo; to the server IP address &lsquo;192.168.1.10:9090&rsquo; as below.</p>
<p>Note:
Scrape configuration containing exactly one endpoint to scrape:
Here it&rsquo;s Prometheus itself.
scrape_configs:
The job name is added as a label <code>job=&lt;job_name&gt;</code> to any timeseries scraped from this config.
job_name: &ldquo;prometheus&rdquo;</p>
<p>metrics_path defaults to &lsquo;/metrics&rsquo;
scheme defaults to &lsquo;http&rsquo;.</p>
<p>static_configs:
targets: [&ldquo;192.168.1.10:9090&rdquo;]</p>
<ol start="4">
<li>Change the configuration and data directories to the user &lsquo;promethues&rsquo;.</li>
</ol>
<p>sudo chown prometheus:prometheus /etc/prometheus
sudo chown prometheus:prometheus /var/lib/prometheus</p>
<p>Basic prometheus installation finished, Hopefully üëç .</p>
<p>Configure Prometheus</p>
<ol>
<li>Create a new systemd service
sudo vim /etc/systemd/system/prometheus.service</li>
</ol>
<p>Copy and paste the following configuration.</p>
<p>[Unit]
Description=Prometheus
Wants=network-online.target
After=network-online.target</p>
<p>[Service]
User=prometheus
Group=prometheus
Type=simple
ExecStart=/usr/local/bin/prometheus <br>
&ndash;config.file /etc/prometheus/prometheus.yml <br>
&ndash;storage.tsdb.path /var/lib/prometheus/ <br>
&ndash;web.console.templates=/etc/prometheus/consoles <br>
&ndash;web.console.libraries=/etc/prometheus/console_libraries</p>
<p>[Install]
WantedBy=multi-user.target</p>
<ol start="2">
<li>Reload the systemd manager to apply a new config.</li>
</ol>
<p>sudo systemctl daemon-reload</p>
<ol start="3">
<li>Start and enable the Prometheus service</li>
</ol>
<p>sudo systemctl enable &ndash;now prometheus
sudo systemctl status prometheus</p>
<p>Prometheus monitoring tool is now accessible on the TCP port &lsquo;9090.</p>
<ol start="4">
<li>Visit IP address with port &lsquo;9090&rsquo;</li>
</ol>
<p>http://192.168.1.10:9090/</p>
<p>And you will see the prometheus dashboard query below.</p>
<p>Prometheus query dashboard</p>
<hr>



<h2 id="reflection-questions">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu12/#reflection-questions">Reflection Questions</a>
</h2>
<ol>
<li>
<p>What questions do you still have about this week?</p>
</li>
<li>
<p>How can you apply this now in your current role in IT? If you‚Äôre not in IT, how can you
look to put something like this into your resume or portfolio?</p>
</li>
</ol>
<hr>



<h3 id="prolug-links-">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu12/#prolug-links-">ProLUG Links ‚õìÔ∏è</a>
</h3>
<p>Discord: <a href="https://discord.com/invite/m6VPPD9usw">https://discord.com/invite/m6VPPD9usw</a>
Youtube: <a href="https://www.youtube.com/@het_tanis8213">https://www.youtube.com/@het_tanis8213</a>
Twitch: <a href="https://www.twitch.tv/het_tanis">https://www.twitch.tv/het_tanis</a>
ProLUG Book: <a href="https://leanpub.com/theprolugbigbookoflabs">https://leanpub.com/theprolugbigbookoflabs</a>
KillerCoda: <a href="https://killercoda.com/het-tanis">https://killercoda.com/het-tanis</a></p>
      
      

  

  





  <footer>
    
      
        <ul class="Tags">
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/categories/learning/" rel="tag">Learning</a>
            </li>
          
        </ul>
      
    
      
        <ul class="Tags">
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/tech/" rel="tag">Tech</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/linux/" rel="tag">Linux</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/administration/" rel="tag">Administration</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/engineering/" rel="tag">Engineering</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/prolug-course/" rel="tag">ProLUG Course</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/operating-systems/" rel="tag">Operating Systems</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/baselining/" rel="tag">Baselining</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/benchmarking/" rel="tag">Benchmarking</a>
            </li>
          
        </ul>
      
    
  </footer>

    </article>
    
      <div class="Divider"></div>
    
  
    <article>
      <header class="Heading">
  <h1 class="Heading-title">
    <a class="Heading-link u-clickable" href="/techblog/post/pacu11/" rel="bookmark">ProLUG Admin Course Unit 11 üêß</a>
  </h1>
  
    <time datetime="2024-11-28T00:00:00Z">November 28, 2024</time>
  
</header>
      
        <h1 id="monitoring-systems">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#monitoring-systems">Monitoring Systems</a>
</h1>
<p>In this unit, we explore monitoring systems, which often consist of multiple interconnected components. At its core, monitoring involves carefully exposing system data and transmitting it to tools for analysis and alerting. From my experience with Prometheus and Grafana‚Äîtwo widely used and versatile solutions‚ÄîI‚Äôve seen how effective these tools can be for various scenarios. However, many other tools are also available. One of my key takeaways from the unit‚Äôs readings and labs was the importance of careful data exposure. Much like setting permissions in a Linux system, it‚Äôs crucial to determine what data can be accessed and who is allowed to see it in the reporting chain. System information, if mishandled, can easily become a double-edged sword.</p>
<hr>



<h2 id="discussion-post-1">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#discussion-post-1">Discussion Post 1</a>
</h2>



<h3 id="scenario">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#scenario">Scenario</a>
</h3>
<p>You‚Äôve heard the term ‚Äúloose coupling‚Äù thrown around the
office about a new monitoring solution coming down the pike. You find a good resource and
read the section on ‚ÄúPrefer Loose Coupling‚Äù <a href="https://sre.google/workbook/monitoring/">https://sre.google/workbook/monitoring/</a></p>



<h4 id="1-what-does-loose-coupling-mean-if-you-had-to-summarize-to-your-junior-team">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#1-what-does-loose-coupling-mean-if-you-had-to-summarize-to-your-junior-team">1. What does ‚Äúloose coupling‚Äù mean, if you had to summarize to your junior team</a>
</h4>
<p>members?</p>
<p>Loose coupling means the components of a system can operate independently, yet still work together when combined. This design allows individual components to be swapped or replaced with minimal disruption to the overall system. In contrast, a strongly coupled system binds its components so tightly that altering one would disrupt or even break the entire system‚Äôs functionality.</p>



<h4 id="2-what-is-the-advantage-given-for-why-you-might-want-to-implement-this-type-of-tooling-in-your-monitoring-do-you-agree-why-or-why-not">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#2-what-is-the-advantage-given-for-why-you-might-want-to-implement-this-type-of-tooling-in-your-monitoring-do-you-agree-why-or-why-not">2. What is the advantage given for why you might want to implement this type of tooling in your monitoring? Do you agree? Why or why not?</a>
</h4>
<p>The advantage of a loosely coupled monitoring system lies in its flexibility to evolve over time. Systems change, requirements shift, and new tools emerge, making adaptability essential. A design that allows components to be replaced or upgraded with minimal disruption is highly valuable‚Äînot only for an organization aiming to maintain efficiency but also for the administrators and engineers responsible for ensuring stability and resolving issues.</p>



<h4 id="3-they-mention-exposing-metrics-what-does-it-mean-to-expose-metrics-what-happens-to-metrics-that-are-exposed-but-never-collected">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#3-they-mention-exposing-metrics-what-does-it-mean-to-expose-metrics-what-happens-to-metrics-that-are-exposed-but-never-collected">3. They mention ‚Äúexposing metrics‚Äù what does it mean to expose metrics? What happens to metrics that are exposed but never collected?</a>
</h4>
<p>Exposing metrics involves making system information accessible for monitoring and analysis. However, this must be approached with caution, as exposing such information can introduce vulnerabilities. Simply exposing data without actively collecting or utilizing it needlessly increases security risks without providing any benefit.</p>
<hr>



<h2 id="discussion-post-2">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#discussion-post-2">Discussion Post 2</a>
</h2>



<h3 id="scenario-1">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#scenario-1">Scenario</a>
</h3>
<p>Your HPC team is asking for more information about how CPU 0
is behaving on a set of servers. Your team has node exporter writing data out to Prometheus
(Use this to simulate <a href="https://promlabs.com/promql-cheat-sheet/)">https://promlabs.com/promql-cheat-sheet/)</a>.</p>



<h4 id="1-can-you-see-the-usage-of-cpu0-and-what-is-the-query">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#1-can-you-see-the-usage-of-cpu0-and-what-is-the-query">1. Can you see the usage of CPU0 and what is the query?</a>
</h4>
<p>Yes one can use a query that focuses on the metrics provided by the Node Exporter. Specifically, filter for CPU 0 and its usage.</p>
<pre><code>100 - (avg by (instance) (irate(node_cpu_seconds_total{cpu=&quot;0&quot;, mode=&quot;idle&quot;}
</code></pre>



<h4 id="2-can-you-see-the-usage-of-cpu0-for-just-the-last-5-minutes-and-what-is-the-query">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#2-can-you-see-the-usage-of-cpu0-for-just-the-last-5-minutes-and-what-is-the-query">2. Can you see the usage of CPU0 for just the last 5 minutes and what is the query?</a>
</h4>
<p>Yes</p>
<pre><code>100 - (avg by (instance) (rate(node_cpu_seconds_total{cpu=&quot;0&quot;, mode=&quot;idle&quot;}[5m])) * 100)
</code></pre>



<h4 id="3-you-know-that-cpu0-is-excluded-from-slurm-can-you-exclude-that-and-only-pull-the-user-and-system-for-the-remaining-cpus-and-what-is-that-query">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#3-you-know-that-cpu0-is-excluded-from-slurm-can-you-exclude-that-and-only-pull-the-user-and-system-for-the-remaining-cpus-and-what-is-that-query">3. You know that CPU0 is excluded from Slurm, can you exclude that and only pull the user and system for the remaining CPUs and what is that query?</a>
</h4>
<p>Yes</p>
<pre><code>sum by (instance) (rate(node_cpu_seconds_total{cpu!=&quot;0&quot;, mode=~&quot;user|system&quot;}[5m])) * 100
</code></pre>
<hr>



<h2 id="digging-deeper">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#digging-deeper">Digging Deeper</a>
</h2>



<h4 id="1-read-the-rest-of-the-chapter-httpssregoogleworkbookmonitoring-and-note-anything-else-of-interest-when-it-comes-to-monitoring-and-dashboarding">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#1-read-the-rest-of-the-chapter-httpssregoogleworkbookmonitoring-and-note-anything-else-of-interest-when-it-comes-to-monitoring-and-dashboarding">1. Read the rest of the chapter <a href="https://sre.google/workbook/monitoring/">https://sre.google/workbook/monitoring/</a> and note anything else of interest when it comes to monitoring and dashboarding.</a>
</h4>



<h4 id="2-look-up-the-prolug-prometheus-certified-associate-prep-2024-in-resources---presentations-in-our-prolug-discord-study-that-for-a-deep-dive-into-prometheus">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#2-look-up-the-prolug-prometheus-certified-associate-prep-2024-in-resources---presentations-in-our-prolug-discord-study-that-for-a-deep-dive-into-prometheus">2. Look up the ‚ÄúProLUG Prometheus Certified Associate Prep 2024‚Äù in Resources -&gt; Presentations in our ProLUG Discord. Study that for a deep dive into Prometheus.</a>
</h4>



<h4 id="3-complete-the-project-section-of-monitoring-deep-dive-project-guide-from-the-prolug-projects-section-of-the-discord-we-have-a-youtube-video-on-that-project-as-well-httpswwwyoutubecomwatchv54vgghr99qg">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#3-complete-the-project-section-of-monitoring-deep-dive-project-guide-from-the-prolug-projects-section-of-the-discord-we-have-a-youtube-video-on-that-project-as-well-httpswwwyoutubecomwatchv54vgghr99qg">3. Complete the project section of ‚ÄúMonitoring Deep Dive Project Guide‚Äù from the prolug-projects section of the Discord. We have a Youtube video on that project as well. <a href="https://www.youtube.com/watch?v=54VgGHr99Qg">https://www.youtube.com/watch?v=54VgGHr99Qg</a></a>
</h4>



<h2 id="labs">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#labs">Labs</a>
</h2>
<p><a href="https://killercoda.com/het-tanis/course/Linux-Labs/102-monitoring-linux-logs">https://killercoda.com/het-tanis/course/Linux-Labs/102-monitoring-linux-logs</a></p>
<p><a href="https://killercoda.com/het-tanis/course/Linux-Labs/103-monitoring-linux-telemetry">https://killercoda.com/het-tanis/course/Linux-Labs/103-monitoring-linux-telemetry</a></p>
<p><a href="https://killercoda.com/het-tanis/course/Linux-Labs/104-monitoring-linux-Influx-Grafana">https://killercoda.com/het-tanis/course/Linux-Labs/104-monitoring-linux-Influx-Grafana</a></p>
<ol start="2">
<li>While completing each lab think about the following:</li>
</ol>
<p>a. How does it tie into the diagram below?</p>
<p>b. What could you improve, or what would you change based on your previous administration
experience.</p>
<hr>



<h3 id="1-install-grafana">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#1-install-grafana">1. Install Grafana</a>
</h3>



<h4 id="11-create-a-new-repository-configuration">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#11-create-a-new-repository-configuration">1.1 Create a New Repository Configuration</a>
</h4>

  

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo vim /etc/yum.repos.d/grafana.repo</span></span></code></pre></div>
<p>Paste the following:</p>

  

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="line"><span class="cl"><span class="k">[grafana]</span>
</span></span><span class="line"><span class="cl"><span class="na">name</span><span class="o">=</span><span class="s">grafana</span>
</span></span><span class="line"><span class="cl"><span class="na">baseurl</span><span class="o">=</span><span class="s">https://packages.grafana.com/oss/rpm</span>
</span></span><span class="line"><span class="cl"><span class="na">repo_gpgcheck</span><span class="o">=</span><span class="s">1</span>
</span></span><span class="line"><span class="cl"><span class="na">enabled</span><span class="o">=</span><span class="s">1</span>
</span></span><span class="line"><span class="cl"><span class="na">gpgcheck</span><span class="o">=</span><span class="s">1</span>
</span></span><span class="line"><span class="cl"><span class="na">gpgkey</span><span class="o">=</span><span class="s">https://packages.grafana.com/gpg.key</span>
</span></span><span class="line"><span class="cl"><span class="na">sslverify</span><span class="o">=</span><span class="s">1</span></span></span></code></pre></div>



<h4 id="12-verify-the-repository">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#12-verify-the-repository">1.2 Verify the Repository</a>
</h4>

  

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo dnf repolist
</span></span><span class="line"><span class="cl">sudo dnf clean all</span></span></code></pre></div>
<p>Expected Output:</p>

  

<pre tabindex="0"><code>repo id                                      repo name
appstream                                    Rocky Linux 8 - AppStream
baseos                                       Rocky Linux 8 - BaseOS
extras                                       Rocky Linux 8 - Extras
grafana                                      grafana/spl</code></pre>



<h4 id="13-check-the-grafana-package">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#13-check-the-grafana-package">1.3 Check the Grafana Package</a>
</h4>

  

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo dnf info grafana</span></span></code></pre></div>
<p>Example Output:</p>

  

<pre tabindex="0"><code>Importing GPG key 0x24098CB6:
Userid     : &#34;Grafana&#34;
Fingerprint: 4E40 DDF6 D76E 284A 4A67 80E4 8C8C 34C5 2409 8CB6
From       : https://packages.grafana.com/gpg.key
Is this ok [y/N]: y</code></pre>



<h4 id="14-install-grafana">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#14-install-grafana">1.4 Install Grafana</a>
</h4>

  

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo dnf install grafana -y</span></span></code></pre></div>



<h4 id="15-enable-and-start-grafana-service">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#15-enable-and-start-grafana-service">1.5 Enable and Start Grafana Service</a>
</h4>

  

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo systemctl <span class="nb">enable</span> --now grafana-server
</span></span><span class="line"><span class="cl">sudo systemctl status grafana-server</span></span></code></pre></div>



<h4 id="16-configure-firewall">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#16-configure-firewall">1.6 Configure Firewall</a>
</h4>

  

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo firewall-cmd --add-service<span class="o">=</span>grafana --permanent
</span></span><span class="line"><span class="cl">sudo firewall-cmd --add-port<span class="o">=</span>3000/tcp --permanent
</span></span><span class="line"><span class="cl">sudo firewall-cmd --reload</span></span></code></pre></div>



<h4 id="17-create-and-edit-configuration-file">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#17-create-and-edit-configuration-file">1.7 Create and Edit Configuration File</a>
</h4>

  

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo vim /etc/grafana/grafana.ini</span></span></code></pre></div>
<p>Update the following settings:</p>

  

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="line"><span class="cl"><span class="k">[server]</span>
</span></span><span class="line"><span class="cl"><span class="na">http_port</span> <span class="o">=</span> <span class="s">4000</span>
</span></span><span class="line"><span class="cl"><span class="na">domain</span> <span class="o">=</span> <span class="s">grafana.example.io</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">[analytics]</span>
</span></span><span class="line"><span class="cl"><span class="na">reporting_enabled</span> <span class="o">=</span> <span class="s">false</span></span></span></code></pre></div>
<p>Restart the service:</p>

  

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo systemctl restart grafana-server</span></span></code></pre></div>
<hr>



<h3 id="2-reverse-proxy-setup-with-nginx">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#2-reverse-proxy-setup-with-nginx">2. Reverse Proxy Setup with NGINX</a>
</h3>



<h4 id="21-install-nginx">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#21-install-nginx">2.1 Install NGINX</a>
</h4>

  

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo dnf install nginx -y</span></span></code></pre></div>



<h4 id="22-create-a-server-block-for-grafana">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#22-create-a-server-block-for-grafana">2.2 Create a Server Block for Grafana</a>
</h4>

  

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo vim /etc/nginx/conf.d/grafana.conf</span></span></code></pre></div>
<p>Paste the configuration:</p>

  

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">map</span> <span class="nv">$http_upgrade</span> <span class="nv">$connection_upgrade</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kn">default</span> <span class="s">upgrade</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="kn">&#39;&#39;</span> <span class="s">close</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">server</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kn">listen</span> <span class="mi">80</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="kn">server_name</span> <span class="s">grafana.example.io</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="kn">rewrite</span> <span class="s">^</span> <span class="s">https://</span><span class="nv">$server_name$request_uri?</span> <span class="s">permanent</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">server</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kn">listen</span> <span class="mi">443</span> <span class="s">ssl</span> <span class="s">http2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="kn">server_name</span> <span class="s">grafana.example.io</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kn">ssl_certificate</span> <span class="s">/etc/letsencrypt/live/grafana.example.io/fullchain.pem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="kn">ssl_certificate_key</span> <span class="s">/etc/letsencrypt/live/grafana.example.io/privkey.pem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kn">location</span> <span class="s">/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">proxy_pass</span> <span class="s">http://localhost:3000/</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kn">location</span> <span class="s">/api/live</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">proxy_http_version</span> <span class="mi">1</span><span class="s">.1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">proxy_set_header</span> <span class="s">Upgrade</span> <span class="nv">$http_upgrade</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">proxy_set_header</span> <span class="s">Connection</span> <span class="nv">$connection_upgrade</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">proxy_pass</span> <span class="s">http://localhost:3000/</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>



<h4 id="23-verify-nginx-configuration">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#23-verify-nginx-configuration">2.3 Verify NGINX Configuration</a>
</h4>

  

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo nginx -t</span></span></code></pre></div>
<p>Expected Output:</p>

  

<pre tabindex="0"><code>nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful</code></pre>



<h4 id="24-start-and-enable-nginx">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#24-start-and-enable-nginx">2.4 Start and Enable NGINX</a>
</h4>

  

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo systemctl <span class="nb">enable</span> --now nginx
</span></span><span class="line"><span class="cl">sudo systemctl status nginx</span></span></code></pre></div>
<hr>



<h3 id="3-install-prometheus">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#3-install-prometheus">3. Install Prometheus</a>
</h3>



<h4 id="31-add-a-new-user-and-directories">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#31-add-a-new-user-and-directories">3.1 Add a New User and Directories</a>
</h4>

  

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo adduser -M -r -s /sbin/nologin prometheus
</span></span><span class="line"><span class="cl">sudo mkdir /etc/prometheus
</span></span><span class="line"><span class="cl">sudo mkdir /var/lib/prometheus</span></span></code></pre></div>



<h4 id="32-download-and-extract-prometheus">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#32-download-and-extract-prometheus">3.2 Download and Extract Prometheus</a>
</h4>

  

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">cd</span> /usr/src
</span></span><span class="line"><span class="cl">wget https://github.com/prometheus/prometheus/releases/download/v3.0.1/prometheus-3.0.1.linux-amd64.tar.gz
</span></span><span class="line"><span class="cl">tar -xzf prometheus-3.0.1.linux-amd64.tar.gz
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> prometheus-3.0.1.linux-amd64</span></span></code></pre></div>



<h4 id="33-move-files-to-appropriate-locations">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#33-move-files-to-appropriate-locations">3.3 Move Files to Appropriate Locations</a>
</h4>

  

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo mv prometheus /usr/local/bin/
</span></span><span class="line"><span class="cl">sudo mv promtool /usr/local/bin/
</span></span><span class="line"><span class="cl">sudo mv consoles /etc/prometheus
</span></span><span class="line"><span class="cl">sudo mv console_libraries /etc/prometheus
</span></span><span class="line"><span class="cl">sudo mv prometheus.yml /etc/prometheus/</span></span></code></pre></div>



<h4 id="34-change-ownership">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#34-change-ownership">3.4 Change Ownership</a>
</h4>

  

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo chown -R prometheus:prometheus /etc/prometheus /var/lib/prometheus</span></span></code></pre></div>



<h4 id="35-configure-prometheus">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#35-configure-prometheus">3.5 Configure Prometheus</a>
</h4>

  

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo vim /etc/prometheus/prometheus.yml</span></span></code></pre></div>
<p>Example scrape configuration:</p>

  

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">scrape_configs</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">job_name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;prometheus&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">static_configs</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">targets</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;192.168.1.10:9090&#34;</span><span class="p">]</span></span></span></code></pre></div>



<h4 id="36-create-a-systemd-service">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#36-create-a-systemd-service">3.6 Create a Systemd Service</a>
</h4>

  

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo vim /etc/systemd/system/prometheus.service</span></span></code></pre></div>
<p>Paste the following:</p>

  

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="line"><span class="cl"><span class="k">[Unit]</span>
</span></span><span class="line"><span class="cl"><span class="na">Description</span><span class="o">=</span><span class="s">Prometheus</span>
</span></span><span class="line"><span class="cl"><span class="na">Wants</span><span class="o">=</span><span class="s">network-online.target</span>
</span></span><span class="line"><span class="cl"><span class="na">After</span><span class="o">=</span><span class="s">network-online.target</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">[Service]</span>
</span></span><span class="line"><span class="cl"><span class="na">User</span><span class="o">=</span><span class="s">prometheus</span>
</span></span><span class="line"><span class="cl"><span class="na">Group</span><span class="o">=</span><span class="s">prometheus</span>
</span></span><span class="line"><span class="cl"><span class="na">Type</span><span class="o">=</span><span class="s">simple</span>
</span></span><span class="line"><span class="cl"><span class="na">ExecStart</span><span class="o">=</span><span class="s">/usr/local/bin/prometheus     --config.file /etc/prometheus/prometheus.yml     --storage.tsdb.path /var/lib/prometheus/     --web.console.templates=/etc/prometheus/consoles     --web.console.libraries=/etc/prometheus/console_libraries</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">[Install]</span>
</span></span><span class="line"><span class="cl"><span class="na">WantedBy</span><span class="o">=</span><span class="s">multi-user.target</span></span></span></code></pre></div>



<h4 id="37-start-prometheus-service">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#37-start-prometheus-service">3.7 Start Prometheus Service</a>
</h4>

  

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo systemctl daemon-reload
</span></span><span class="line"><span class="cl">sudo systemctl <span class="nb">enable</span> --now prometheus
</span></span><span class="line"><span class="cl">sudo systemctl status prometheus</span></span></code></pre></div>



<h4 id="38-access-prometheus">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#38-access-prometheus">3.8 Access Prometheus</a>
</h4>
<p>Visit <code>http://192.168.1.10:9090</code> in your browser to view the Prometheus dashboard.</p>
<hr>



<h2 id="reflection-questions">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#reflection-questions">Reflection Questions</a>
</h2>
<ol>
<li>
<p>What questions do you still have about this week?</p>
</li>
<li>
<p>How can you apply this now in your current role in IT? If you‚Äôre not in IT, how can you
look to put something like this into your resume or portfolio?</p>
</li>
</ol>
<hr>



<h3 id="prolug-links-">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu11/#prolug-links-">ProLUG Links ‚õìÔ∏è</a>
</h3>
<p>Discord: <a href="https://discord.com/invite/m6VPPD9usw">https://discord.com/invite/m6VPPD9usw</a>
Youtube: <a href="https://www.youtube.com/@het_tanis8213">https://www.youtube.com/@het_tanis8213</a>
Twitch: <a href="https://www.twitch.tv/het_tanis">https://www.twitch.tv/het_tanis</a>
ProLUG Book: <a href="https://leanpub.com/theprolugbigbookoflabs">https://leanpub.com/theprolugbigbookoflabs</a>
KillerCoda: <a href="https://killercoda.com/het-tanis">https://killercoda.com/het-tanis</a></p>
      
      

  

  





  <footer>
    
      
        <ul class="Tags">
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/categories/learning/" rel="tag">Learning</a>
            </li>
          
        </ul>
      
    
      
        <ul class="Tags">
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/tech/" rel="tag">Tech</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/linux/" rel="tag">Linux</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/administration/" rel="tag">Administration</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/engineering/" rel="tag">Engineering</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/prolug-course/" rel="tag">ProLUG Course</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/operating-systems/" rel="tag">Operating Systems</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/monitoring/" rel="tag">Monitoring</a>
            </li>
          
        </ul>
      
    
  </footer>

    </article>
    
      <div class="Divider"></div>
    
  
    <article>
      <header class="Heading">
  <h1 class="Heading-title">
    <a class="Heading-link u-clickable" href="/techblog/post/pacu10/" rel="bookmark">ProLUG Admin Course Unit 10 üêß</a>
  </h1>
  
    <time datetime="2024-11-22T00:00:00Z">November 22, 2024</time>
  
</header>
      
        <h1 id="kubernetes">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#kubernetes">Kubernetes</a>
</h1>
<p>&ldquo;The OS of the Internet&rdquo;</p>
<p>This week, we were privileged to host a special guest lecture by John Champine, Scott&rsquo;s brother. Over the course of an engaging two-hour session, John delivered an in-depth exploration of Kubernetes, thoroughly covering the five W&rsquo;s: Who, What, When, Where, and Why.</p>
<p>John&rsquo;s passion and deep knowledge of Kubernetes were evident throughout the presentation. Having firsthand experience with the challenges of pre-Kubernetes infrastructure, he offered valuable insights into how this platform has revolutionized modern computing. Notably, John specializes in OpenShift, an IBM-owned management layer built atop Kubernetes. OpenShift adds additional functionality and ease of use to what is already a powerful but complex system.</p>
<p>One concept that particularly caught my attention was the <strong>fractionalization of CPU and memory resources</strong> made possible by Kubernetes&rsquo; sophisticated resource management. John introduced the term <em>millicore</em>, a concept I was previously unfamiliar with. It refers to the fine-grained allocation of processing power, where fractions of a CPU core are shared across processes during compute cycles. This ability to manage resources at such a granular level is remarkable, showcasing the efficiency and precision of Kubernetes.</p>
<p>Before this lecture, I never imagined that such details‚Äîdown to the microsecond allocation of core usage‚Äîcould not only be considered but also controlled and utilized to optimize workloads. This level of resource management truly solidifies Kubernetes&rsquo; position as the &ldquo;operating system of the internet,&rdquo; enabling applications to run more efficiently and reliably across diverse infrastructures.</p>
<p>John‚Äôs insights not only deepened my understanding of Kubernetes but also sparked curiosity about the broader implications of containerized resource management in modern computing.</p>
<p>One idea that has been dispelled by doing these exercises is that Kubernetes is overkill for most things. Yes, standing up multiple networked nodes and having them interoperate is no small task. However, there exist lightweight, single node variants like K3s that enable a simplified experience while maintaining the powerful advantages of an orchestration system.</p>



<h2 id="furthermore-given-the-threat-landscape-desire-for-declarative-infrastructure-and-ever-fluctuating-demand-it-makes-sense-to-implement-a-tool-that-is-designed-for-these-modern-demands">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#furthermore-given-the-threat-landscape-desire-for-declarative-infrastructure-and-ever-fluctuating-demand-it-makes-sense-to-implement-a-tool-that-is-designed-for-these-modern-demands">Furthermore, given the threat landscape, desire for declarative infrastructure and ever fluctuating demand, it makes sense to implement a tool that is designed for these modern demands.</a>
</h2>



<h2 id="discussion-post-1">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#discussion-post-1">Discussion Post 1</a>
</h2>
<p>Reading: <a href="https://kubernetes.io/docs/concepts/overview/">https://kubernetes.io/docs/concepts/overview/</a> üìó</p>



<h3 id="question-1">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#question-1">Question 1</a>
</h3>
<p><strong>What are the two most compelling reasons you see to implement Kubernetes in your organization?</strong></p>
<ol>
<li><strong>Efficient Usage of Resources</strong>: Kubernetes optimizes resource allocation and ensures workloads are distributed efficiently across your infrastructure.</li>
<li><strong>Built-in Redundancy</strong>: Kubernetes provides automatic failover and self-healing capabilities, ensuring high availability for applications.</li>
</ol>
<p>Other notable reasons include:</p>
<ul>
<li><strong>Load Balancing</strong>: Automatically distributes traffic across pods to maintain application performance. ‚öñÔ∏è</li>
<li><strong>Centralized Control</strong>: Manages deployments, updates, and scaling from a single interface. üéØ</li>
<li><strong>Declarative in Nature</strong>: Uses declarative configurations, making it easier to maintain and reproduce states. üîñ</li>
<li><strong>Customizable for Organizational Needs</strong>: Offers flexibility to adapt to specific requirements through pluggable components. üîå</li>
<li><strong>Open Source</strong>: Eliminates vendor lock-in while benefiting from a large and active community. ‚öôÔ∏è</li>
<li><strong>Broadly Used</strong>: Extensive community adoption ensures a wealth of resources, tools, and discussions. üìú</li>
<li><strong>Written in Go</strong>: Delivers a lightweight, high-performance foundation that I am irrationally a fan of üòâ</li>
</ul>
<hr>



<h3 id="question-2">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#question-2">Question 2</a>
</h3>
<p><strong>When the article says Kubernetes is not a PaaS, what do they mean by that? What is a PaaS in comparison?</strong></p>
<p>Kubernetes is not a Platform-as-a-Service (PaaS) because it operates at the <strong>container level</strong> rather than the <strong>application or hardware level</strong>. While it provides some features similar to PaaS offerings, Kubernetes emphasizes flexibility, composability, and user choice rather than prescribing a monolithic solution.</p>



<h4 id="key-characteristics-of-kubernetes-compared-to-paas">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#key-characteristics-of-kubernetes-compared-to-paas">Key Characteristics of Kubernetes Compared to PaaS:</a>
</h4>
<ol>
<li>
<p><strong>What Kubernetes Is</strong>:</p>
<ul>
<li>Provides foundational building blocks for deploying, scaling, and managing containerized applications.</li>
<li>Is modular, with optional and pluggable solutions for logging, monitoring, alerting, and scaling.</li>
<li>Focuses on maintaining desired state through independent, composable control processes.</li>
<li>Preserves user choice by not dictating application or configuration specifics.</li>
</ul>
</li>
<li>
<p><strong>What Kubernetes Is Not</strong>:</p>
<ul>
<li>Does not limit the types of applications it supports.</li>
<li>Does not deploy source code or build your application.</li>
<li>Does not provide application-level services (e.g., middleware, databases).</li>
<li>Does not enforce specific logging, monitoring, or alerting solutions.</li>
<li>Does not include a proprietary configuration system or language (e.g., Jsonnet).</li>
<li>Does not manage comprehensive machine-level configuration, maintenance, or self-healing.</li>
</ul>
</li>
</ol>



<h4 id="comparison-to-paas">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#comparison-to-paas">Comparison to PaaS:</a>
</h4>
<p>A Platform-as-a-Service (PaaS), such as Heroku or OpenShift, provides a more opinionated, all-encompassing solution by:</p>
<ul>
<li>Supporting application deployment directly from source code.</li>
<li>Managing application-level services like databases or caching layers.</li>
<li>Offering integrated logging, monitoring, and alerting.</li>
<li>Providing a simplified developer experience but with less flexibility.</li>
</ul>
<p>In contrast, Kubernetes gives users the tools to build their own developer platforms while leaving critical choices in the user‚Äôs hands.</p>
<hr>



<h2 id="discussion-post-2">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#discussion-post-2">Discussion Post 2</a>
</h2>



<h3 id="scenario">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#scenario">Scenario</a>
</h3>
<p>You get a ticket about your new test cluster. The team is unable to deploy some of their applications. They suspect there is a problem and send you over this output:</p>



<h3 id="kubernetes-cluster-information">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#kubernetes-cluster-information">Kubernetes Cluster Information</a>
</h3>



<h4 id="kubectl-version">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#kubectl-version">kubectl Version</a>
</h4>
<table>
  <thead>
      <tr>
          <th>Component</th>
          <th>Version</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Client Version</td>
          <td>v1.31.6+k3s3</td>
      </tr>
      <tr>
          <td>Kustomize Version</td>
          <td>v5.0.4-0.20230601165947-6ce0bf390ce3</td>
      </tr>
      <tr>
          <td>Server Version</td>
          <td>v1.30.6+k3s1</td>
      </tr>
  </tbody>
</table>



<h4 id="node-status">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#node-status">Node Status</a>
</h4>
<table>
  <thead>
      <tr>
          <th>NAME</th>
          <th>STATUS</th>
          <th>ROLES</th>
          <th>AGE</th>
          <th>VERSION</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Test_Cluster1</td>
          <td>Ready</td>
          <td>control-plane,master</td>
          <td>17h</td>
          <td>v1.30.6+k3s1</td>
      </tr>
      <tr>
          <td>Test_Cluster2</td>
          <td>NotReady</td>
          <td>worker</td>
          <td>33m</td>
          <td>v1.29.6+k3s1</td>
      </tr>
      <tr>
          <td>Test_Cluster3</td>
          <td>Ready</td>
          <td>worker</td>
          <td>17h</td>
          <td>v1.28.6+k3s1</td>
      </tr>
  </tbody>
</table>



<h3 id="question-1-1">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#question-1-1">Question 1</a>
</h3>
<p>What are you checking on the cluster to validate you see their error?</p>
<p>To identify and validate the issue with the node <strong>Test_Cluster2</strong>:</p>
<p>Check the overall cluster status</p>
<ul>
<li>Run <strong>kubectl get nodes</strong> to see the status of all nodes in the cluster.</li>
<li>This confirms <strong>Test_Cluster2</strong> is <strong>NotReady</strong>.</li>
</ul>
<p>Inspect node details</p>
<ul>
<li>Run <strong>kubectl describe nodes Test_Cluster2</strong> to check for events, taints, and resource usage issues. Look for errors related to kubelet, network, or node conditions.</li>
</ul>
<p>Access the node**</p>
<ul>
<li>SSH into the node with <strong>ssh Test_Cluster2</strong> to perform further diagnostics.</li>
</ul>
<p>Verify kubelet status</p>
<ul>
<li>Run <strong>systemctl status kubelet</strong> to check if the kubelet service is running and healthy.</li>
</ul>
<p>Check container runtime</p>
<ul>
<li>Depending on your runtime, run either <strong>systemctl status docker</strong> or <strong>systemctl status podman</strong> to ensure the container runtime is operational.</li>
</ul>
<p>Reload and restart services</p>
<ul>
<li>If issues are detected, attempt to reload the systemd daemon (<strong>systemctl daemon-reload</strong>) and restart kubelet (<strong>systemctl restart kubelet</strong>).</li>
</ul>
<hr>



<h3 id="question-2-1">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#question-2-1">Question 2</a>
</h3>
<p>What do you think the problem could be?</p>
<p>Potential problems for <strong>Test_Cluster2</strong> being <strong>NotReady</strong> include:</p>
<ul>
<li>The <strong>Test_Cluster2</strong> node is running Kubernetes version <strong>v1.29.6+k3s1</strong>, which is older than the server and other nodes (<strong>v1.30.6+k3s1</strong>). This may cause compatibility issues.</li>
<li>The kubelet service might have failed or not started.</li>
<li>Networking problems could prevent the node from communicating with the control plane.</li>
<li>The node may lack sufficient CPU, memory, or disk space for the kubelet to function.</li>
<li>Taints, labels, or configuration errors might prevent the node from becoming <strong>Ready</strong>.</li>
<li>Hardware issues or kernel module problems may impact the node&rsquo;s health.</li>
</ul>



<h3 id="question-3">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#question-3">Question 3</a>
</h3>
<p>Do you think someone else has tried anything to fix this problem before you? Why or why not?</p>
<p>Yes, someone may have tried to fix it</p>
<ul>
<li>The node was added only <strong>33 minutes ago</strong>, indicating recent activity.</li>
<li>It‚Äôs common for issues to be noticed and an initial attempt made before escalating.</li>
<li><strong>systemctl status</strong> may show if services were restarted recently, suggesting prior troubleshooting.</li>
</ul>
<p>No, it may not have been addressed yet because:</p>
<ul>
<li>The node is still in the <strong>NotReady</strong> state, implying no successful resolution so far.</li>
<li>Lack of detailed documentation or escalation might mean no one has investigated yet.</li>
</ul>
<p>To confirm, check the node&rsquo;s event logs (<strong>kubectl describe nodes Test_Cluster2</strong>) or system logs (<strong>journalctl -u kubelet</strong>) for evidence of recent actions.</p>
<hr>



<h2 id="discussion-post-3">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#discussion-post-3">Discussion Post 3</a>
</h2>



<h3 id="scenario-1">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#scenario-1">Scenario:</a>
</h3>
<p>You are the network operations center (NOC) lead. Your team has recently started supporting the dev, test, and QA environments for your company‚Äôs K8s cluster. Write up a basic checkout procedure for your new NOC personnel to verify operation of the cluster before escalating on critical alerts.</p>



<h1 id="kubernetes-cluster-checkout-procedure-for-noc-personnel">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#kubernetes-cluster-checkout-procedure-for-noc-personnel">Kubernetes Cluster Checkout Procedure for NOC Personnel</a>
</h1>
<p>This document outlines the basic steps for verifying the operation of the Kubernetes (K8s) cluster before escalating on critical alerts.</p>
<hr>



<h2 id="1-verify-cluster-health">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#1-verify-cluster-health"><strong>1. Verify Cluster Health</strong></a>
</h2>



<h4 id="--login-to-the-cluster">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#--login-to-the-cluster">- <strong>Login to the Cluster</strong></a>
</h4>
<ul>
<li>
<p>Access the cluster using the <strong>kubectl</strong> command-line tool.</p>
</li>
<li>
<p>Use the appropriate kubeconfig file for the environment (dev, test, QA).</p>
<p>kubectl config use-context <!-- raw HTML omitted --></p>
</li>
</ul>



<h4 id="--check-cluster-nodes">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#--check-cluster-nodes">- <strong>Check Cluster Nodes</strong></a>
</h4>
<pre><code>    kubectl get nodes
</code></pre>
<ul>
<li>Look for any nodes in NotReady, Unknown, or SchedulingDisabled status. Investigate any anomalies.</li>
</ul>



<h4 id="--check-system-pods">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#--check-system-pods">- <strong>Check System Pods</strong></a>
</h4>
<ul>
<li>
<p>Verify critical system pods in the kube-system namespace are running</p>
<pre><code>  kubectl get pods -n kube-system
</code></pre>
</li>
</ul>



<h4 id="pay-special-attention-to-core-components">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#pay-special-attention-to-core-components">Pay special attention to core components:</a>
</h4>
<ul>
<li>kube-apiserver</li>
<li>kube-scheduler</li>
<li>kube-controller-manager</li>
<li>etcd</li>
</ul>
<hr>



<h2 id="2-verify-namespace-and-application-status">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#2-verify-namespace-and-application-status"><strong>2. Verify Namespace and Application Status</strong></a>
</h2>



<h4 id="--list-all-namespaces">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#--list-all-namespaces">- <strong>List All Namespaces</strong></a>
</h4>
<pre><code>    kubectl get namespaces
</code></pre>



<h4 id="--check-pod-status-in-active-namespaces">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#--check-pod-status-in-active-namespaces">- <strong>Check Pod Status in Active Namespaces</strong></a>
</h4>
<pre><code>    kubectl get pods -n &lt;namespace&gt;
</code></pre>



<h4 id="--inspect-deployments-and-replicasets">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#--inspect-deployments-and-replicasets">- <strong>Inspect Deployments and ReplicaSets</strong></a>
</h4>
<pre><code>    kubectl get deployments -n &lt;namespace&gt;
    kubectl get rs -n &lt;namespace&gt;
</code></pre>
<hr>



<h2 id="3-verify-cluster-networking">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#3-verify-cluster-networking"><strong>3. Verify Cluster Networking</strong></a>
</h2>



<h4 id="--service-connectivity">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#--service-connectivity">- <strong>Service Connectivity</strong></a>
</h4>
<pre><code>    kubectl get svc -n &lt;namespace&gt;
</code></pre>



<h4 id="--dns-resolution">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#--dns-resolution">- <strong>DNS Resolution</strong></a>
</h4>
<pre><code>    kubectl exec -n kube-system &lt;coredns-pod&gt; -- nslookup kubernetes.default
</code></pre>



<h4 id="--ingressload-balancer">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#--ingressload-balancer">- <strong>Ingress/Load Balancer</strong></a>
</h4>
<pre><code>    kubectl get ingress -n &lt;namespace&gt;
</code></pre>
<hr>



<h2 id="4-monitor-resource-utilization">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#4-monitor-resource-utilization"><strong>4. Monitor Resource Utilization</strong></a>
</h2>
<p>Node Resource Usage</p>
<pre><code>    kubectl top nodes
</code></pre>
<p>Pod Resource Usage</p>
<pre><code>    kubectl top pods -n &lt;namespace&gt;
</code></pre>
<hr>



<h2 id="5-check-cluster-events">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#5-check-cluster-events"><strong>5. Check Cluster Events</strong></a>
</h2>
<pre><code>    kubectl get events --sort-by='.metadata.creationTimestamp'
</code></pre>
<hr>



<h2 id="6-validate-logging-and-monitoring">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#6-validate-logging-and-monitoring"><strong>6. Validate Logging and Monitoring</strong></a>
</h2>
<ul>
<li>Ensure logging systems (e.g., EFK, Fluentd) are collecting logs as expected.</li>
<li>Verify monitoring dashboards (e.g., Prometheus, Grafana) for anomalies or missing metrics.</li>
</ul>
<hr>



<h2 id="7-escalation-criteria">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#7-escalation-criteria"><strong>7. Escalation Criteria</strong></a>
</h2>
<ul>
<li>Core system pods (kube-apiserver, etcd) are not running.</li>
<li>A node remains in NotReady for more than 10 minutes.</li>
<li>Pods in critical application namespaces are in CrashLoopBackOff or Error state without resolution.</li>
<li>Networking issues persist and cannot be resolved by basic checks.</li>
<li>Cluster resource utilization is critically high (e.g., &gt;90% CPU or memory).</li>
</ul>
<hr>



<h2 id="8-document-findings">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#8-document-findings"><strong>8. Document Findings</strong></a>
</h2>
<ul>
<li>Record all findings in the incident management system, including:</li>
<li>Steps taken during the checkout procedure.</li>
<li>Observed errors or anomalies.</li>
<li>Commands run and their output (if significant).</li>
</ul>



<h2 id="end-of-document">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#end-of-document">End of Document</a>
</h2>
<hr>



<h3 id="what-information-online-helped-you-figure-this-out-what-blogs-or-tools-did-you-use">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#what-information-online-helped-you-figure-this-out-what-blogs-or-tools-did-you-use">What information online helped you figure this out? What blogs or tools did you use?</a>
</h3>
<ul>
<li><a href="https://kubernetes.io/docs/tasks/debug/debug-cluster/">https://kubernetes.io/docs/tasks/debug/debug-cluster/</a></li>
<li><a href="https://kubernetes.io/docs/concepts/">https://kubernetes.io/docs/concepts/</a></li>
<li>From conducting study-groups and working with K3s</li>
</ul>



<h3 id="what-did-you-learn-in-this-process-of-writing-this-up">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#what-did-you-learn-in-this-process-of-writing-this-up">What did you learn in this process of writing this up?</a>
</h3>
<ul>
<li>Kubernetes is an Operating System with similar failure modes to that of Linux</li>
<li>Kubernetes maintains helpful logs</li>
<li>Kubernetes gives helpful errors</li>
<li>KubeCTL is the tool I should internalize and master</li>
<li>KubeCTL can manage multiple clusters remotely</li>
</ul>
<hr>



<h2 id="digging-deeper-">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#digging-deeper-">Digging Deeper ‚õèÔ∏è</a>
</h2>
<ol>
<li>Work more in the lab to build a container of your choice and then find out how to
deploy that into your cluster in a secure, scalable way. üëç</li>
</ol>
<p>I have actually experimented with building out custom containers using Podman and using:</p>
<pre><code>    podman commit
</code></pre>
<p>to export the image as a custom local image. Then, I run that image and input the command:</p>
<pre><code>    podman generate kube my-container &gt; my-container.yaml
</code></pre>
<p>This creates a manifest yaml that can then be spun up with Kubernetes.</p>
<ol start="2">
<li>Read this about securing containers: <a href="https://docs.docker.com/build/building/best-">https://docs.docker.com/build/building/best-</a>
practices</li>
</ol>
<p>I do have prior experience with this having completed the DevSecOps certification from TryHackMe, it covers containers security with red-team exercises.
However, it does not cover a ton of defensive measures. This best practices document is going to be really helpful when setting up future containers.</p>
<ul>
<li>Do this to practice securing those containers. <a href="https://killercoda.com/killer-">https://killercoda.com/killer-</a>
shell-cks/scenario/static-manual-analysis-docker üëç</li>
</ul>
<ol start="3">
<li>Read these about securing Kubernetes Deployments:</li>
</ol>
<p><a href="https://kubernetes.io/docs/concepts/security/">https://kubernetes.io/docs/concepts/security/</a> üëç and
<a href="https://kubernetes.io/docs/concepts/security/pod-security-standards/">https://kubernetes.io/docs/concepts/security/pod-security-standards/</a></p>
<ul>
<li>
<p>TLS</p>
</li>
<li>
<p>Secrets API</p>
</li>
<li>
<p>Runtime Classes</p>
</li>
<li>
<p>Network Policies</p>
</li>
<li>
<p>Admission Policy</p>
</li>
<li>
<p>Pod Security standards</p>
</li>
<li>
<p>Open Policy, assumed safe privileged user.</p>
</li>
<li>
<p>Baseline Policy</p>
</li>
<li>
<p>SELinux enforce Policy</p>
</li>
<li>
<p>Do this lab to practice securing Kubernetes: <a href="https://killercoda.com/killer-">https://killercoda.com/killer-</a>
shell-cks/scenario/static-manual-analysis-k8s</p>
</li>
</ul>
<p>So checking the privilege status indicates a container is privleged or not. If privleged, move to insecure directory.</p>
<hr>



<h1 id="labs-">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#labs-">Labs ü•ºüß™</a>
</h1>



<h3 id="warmup">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#warmup">Warmup</a>
</h3>
<pre><code>    curl -sfL https://get.k3s.io &gt; /tmp/k3_installer.sh üëç
    
    more /tmp/k3_installer.sh üëç
</code></pre>
<p>What do you notice in the installer?</p>
<p>What checks are there?</p>
<pre><code>    grep -i arch /tmp/k3_installer.sh
</code></pre>
<p>What is the name of the variable holding the architecture?</p>
<p>How is the system finding that variable?</p>
<pre><code>    uname -m
</code></pre>
<p>Verify your system architecture</p>
<pre><code>    grep -iE ‚Äúselinux|sestatus‚Äù /tmp/k3_installer.sh
</code></pre>
<p>Does K3s check if selinux is running, or no? Yes üëç</p>



<h3 id="installing-k3s-and-looking-at-how-it-interacts-with-your-linux-system">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#installing-k3s-and-looking-at-how-it-interacts-with-your-linux-system">Installing k3s and looking at how it interacts with your Linux system</a>
</h3>
<p>Install k3s
curl -sfL <a href="https://get.k3s.io">https://get.k3s.io</a> | sh -</p>
<p>What was installed on your system?</p>
<pre><code>    rpm -qa ‚Äìlast | tac
</code></pre>
<p>Your tasks in this lab are designed to get you thinking about how container deployments interact with</p>
<ol start="3">
<li>
<p>Verify the service is running</p>
<pre><code> systemctl status k3s
</code></pre>
</li>
<li>
<p>Check it systemd configuration</p>
<pre><code> systemctl cat k3s
</code></pre>
</li>
<li>
<p>See what files and ports it is using</p>
<pre><code> ss -ntulp | grep &lt;pid from 3&gt;

 lsof -p &lt;pid from 3&gt;
</code></pre>
</li>
</ol>
<p>#Do you notice any ports that you did not expect?</p>
<ol start="6">
<li>
<p>Verify simple kubectl call to API</p>
<pre><code> kubectl get nodes
</code></pre>
</li>
<li>
<p>Verify K3s is set to start on boot and then cycle the service</p>
<pre><code> systemctl is-enabled k3s

 systemctl stop k3s
</code></pre>
</li>
</ol>
<p>Recheck your steps 3-6</p>
<p>What error do you see, and is it expected?</p>
<p>What is the API port that kubectl is failing on?</p>
<pre><code>    systemctl start k3s
</code></pre>
<p>Verify your normal operations again.</p>
<p>Looking at the K3 environment</p>
<ol>
<li>
<p>Check out components</p>
<pre><code> kubectl version

 kubectl get nodes

 kubectl get pods -A

 kubectl get namespaces

 kubectl get configmaps -A

 kubectl get secrets -A
</code></pre>
</li>
</ol>
<p>#Which namespace seems to be the most used?</p>
<p>Creating Pods, Deployments, and Services</p>
<p>It‚Äôs possible that the lab will fail in this environment. Continue as you can and identify the problem using</p>
<p>the steps at the end of this section.</p>
<ol>
<li>
<p>Create a pod named webpage with the image nginx</p>
<pre><code> kubectl run webpage --image=nginx
</code></pre>
</li>
<li>
<p>Create a pod named database with the image redis and labels set to tier=database</p>
<pre><code> kubectl run database --image=redis --labels=tier=database
</code></pre>
</li>
<li>
<p>Create a service with the name redis-service to expose the database pod within the cluster on port</p>
<pre><code> 6379 (default Redis port)
 kubectl expose pod database --port=6379 --name=redis-service --
 type=ClusterIP
</code></pre>
</li>
<li>
<p>Create a deployment called web-deployment using the image nginx that has 3 replicas</p>
<pre><code> kubectl create deployment web-deployment --image=nginx --
 replicas=3
</code></pre>
</li>
<li>
<p>Verify that the pods are created</p>
<pre><code> kubectl get deployments
 kubectl get pods
</code></pre>
</li>
<li>
<p>Create a new namespace called my-test</p>
<pre><code> kubectl create namespace my-test
</code></pre>
</li>
<li>
<p>Create a new deployment called redis-deploy with the image redis in your my-test namespace with 2</p>
<pre><code> replicas
 kubectl create deployment redis-deploy -n my-test --image=redis -
 -replicas=2
</code></pre>
</li>
</ol>
<p>Do some of your same checks from before. What do you notice about the pods you created? Did they all
work?</p>
<p>If this breaks in the lab, document the error. Check your disk space and RAM, the two tightest
constraints in the lab. Using systemctl restart k3s and journalctl -xe can you figure out what is failing?
(Rocky boxes may have limitations that cause this to not fully deploy, can you find out why?)</p>
<hr>



<h2 id="reflection-questions">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#reflection-questions">Reflection questions:</a>
</h2>
<ol>
<li>What questions do you still have about this week?</li>
</ol>
<p>I would like to know more about Kubernetes and how it can be effectively managed, but this is just a matter of further study.</p>
<ol start="2">
<li>How can you apply this now in your current role in IT? If you‚Äôre not in IT, how can you
look to put something like this into your resume or portfolio?</li>
</ol>
<p>I installed K3S on my personal lab and ran through two days of exercises with the study group, gaining some competency with installing, configuring and deploying a set of pods from manifests. So I could confidently state that I know how to do this and check on the health of the system.</p>
<hr>



<h3 id="prolug-links-">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu10/#prolug-links-">ProLUG Links ‚õìÔ∏è</a>
</h3>
<p>Discord: <a href="https://discord.com/invite/m6VPPD9usw">https://discord.com/invite/m6VPPD9usw</a>
Youtube: <a href="https://www.youtube.com/@het_tanis8213">https://www.youtube.com/@het_tanis8213</a>
Twitch: <a href="https://www.twitch.tv/het_tanis">https://www.twitch.tv/het_tanis</a>
ProLUG Book: <a href="https://leanpub.com/theprolugbigbookoflabs">https://leanpub.com/theprolugbigbookoflabs</a>
KillerCoda: <a href="https://killercoda.com/het-tanis">https://killercoda.com/het-tanis</a></p>
      
      

  

  





  <footer>
    
      
        <ul class="Tags">
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/categories/learning/" rel="tag">Learning</a>
            </li>
          
        </ul>
      
    
      
        <ul class="Tags">
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/tech/" rel="tag">Tech</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/linux/" rel="tag">Linux</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/administration/" rel="tag">Administration</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/engineering/" rel="tag">Engineering</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/prolug-course/" rel="tag">ProLUG Course</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/operating-systems/" rel="tag">Operating Systems</a>
            </li>
          
        </ul>
      
    
  </footer>

    </article>
    
      <div class="Divider"></div>
    
  
    <article>
      <header class="Heading">
  <h1 class="Heading-title">
    <a class="Heading-link u-clickable" href="/techblog/post/pacu9/" rel="bookmark">ProLUG Admin Course Unit 9 üêß</a>
  </h1>
  
    <time datetime="2024-11-12T00:00:00Z">November 12, 2024</time>
  
</header>
      
        <h1 id="containers--kubernetes-">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu9/#containers--kubernetes-">Containers &amp; Kubernetes ü¶≠</a>
</h1>
<p>One of the most exciting units for me has been exploring deployment and hosting infrastructure. I‚Äôve already spent some time working with Docker and Podman, but I have had limited hands-on experience with Kubernetes. Before this unit, I completed a few interactive Kubernetes labs on Killercoda, covering basic commands, information gathering, and logging.</p>
<p>This week, I followed an interactive K3s lab that guided me through the installation process‚Äîa perfect refresher. Afterward, I jumped onto one of my Proxmox VMs and installed K3s on my homeLab üë®‚Äçüîß</p>
<hr>



<h2 id="discussion-post-1">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu9/#discussion-post-1">Discussion Post 1</a>
</h2>
<p>It‚Äôs a slow day in the NOC and you have heard that a new system of container deployments are being used by your developers. Do some reading about containers, docker, and podman.</p>



<h3 id="1what-resources-helped-me-answer-these-questions">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu9/#1what-resources-helped-me-answer-these-questions">1.	What resources helped me answer these questions</a>
</h3>
<ul>
<li><a href="https://www.redhat.com/en/topics/containers">https://www.redhat.com/en/topics/containers</a></li>
<li>My RHCSA 9 Course on Udemy</li>
<li>Notes I have composed in LogSeq from multiple sources</li>
<li>Julia Evans Blog <a href="https://jvns.ca/">https://jvns.ca/</a></li>
</ul>



<h3 id="2what-did-you-learn-about-that-you-didnt-know-before">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu9/#2what-did-you-learn-about-that-you-didnt-know-before">2.	What did you learn about that you didn‚Äôt know before?</a>
</h3>
<ul>
<li>I did not know that Podman and Kubernetes can run WASM Applications alongside containers. I have some interest in WASM and Subsequent ByteCode, having read about it on occasion.</li>
<li>I did not know that Podman containers can be converted to SystemD services.</li>
<li>I learned a technique that I quite like using podman commit to create a custom compose file from a modified container and will likely use this alot.</li>
</ul>
<p><strong>Terminology that I wasn&rsquo;t familiar with:</strong></p>
<ul>
<li>Control Plane: Manages container orchestration, monitoring, and state across cluster nodes.</li>
<li>The API server: Core interface for communication between users and container clusters.</li>
<li>Scheduler: Assigns containers to nodes based on resource availability and policies.</li>
</ul>



<h3 id="3what-seems-to-be-the-major-benefit-of-containers">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu9/#3what-seems-to-be-the-major-benefit-of-containers">3.	What seems to be the major benefit of containers?</a>
</h3>
<ul>
<li>Can be declarative with compose. So infrastructure can be explicitly defined and easily rebuilt.</li>
<li>Light weight / low resource. Containers are not complete systems and are stripped to the bare essentials, meaning they are very small files that run fast.</li>
</ul>



<h3 id="4what-seems-to-be-some-obstacles-to-container-deployment">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu9/#4what-seems-to-be-some-obstacles-to-container-deployment">4.	What seems to be some obstacles to container deployment?</a>
</h3>
<ul>
<li>From my own experience, mounting persistent volumes was a bit tricky.</li>
<li>Container networking presents a challenge bot conceptually and practically.</li>
<li>Packaging application to run harmoniously within a container environment presents some friction.</li>
<li>Large infrastructure must be broken into microservices, introducing complexity.</li>
</ul>
<hr>



<h2 id="discussion-post-2">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu9/#discussion-post-2">Discussion Post 2</a>
</h2>
<p>You get your first ticket about a problem with containers. One of the engineers is trying to move his container up to the Dev environment shared server. He sends you over this information about the command he‚Äôs trying to run.</p>
<pre><code>[developer1@devserver read]$ podman ps
CONTAINER ID  IMAGE       COMMAND     CREATED     STATUS      PORTS       NAMES

[developer1@devserver read]$ podman images

REPOSITORY                TAG                IMAGE ID      CREATED      SIZE
localhost/read_docker     latest             2c0728a1f483  5 days ago   68.2 MB
docker.io/library/python  3.13.0-alpine3.19  9edd75ff93ac  3 weeks ago  47.5 MB
[developer1@devserver read]$ podman run -dt -p 8080:80/tcp docker.io/library/httpd
You decide to check out the server 
[developer1@devserver read] ss -ntulp
Netid   State    Recv-Q   Send-Q      Local Address:Port        Peer Address:Port         Process
udp     UNCONN   0        0           127.0.0.53%lo:53               0.0.0.0:*             users:((&quot;systemd-resolve&quot;,pid=166693,fd=13))
tcp     LISTEN   0        80              127.0.0.1:3306             0.0.0.0:*             users:((&quot;mariadbd&quot;,pid=234918,fd=20))
tcp     LISTEN   0        128               0.0.0.0:22               0.0.0.0:*             users:((&quot;sshd&quot;,pid=166657,fd=3))
tcp     LISTEN   0        4096        127.0.0.53%lo:53               0.0.0.0:*             users:((&quot;systemd-resolve&quot;,pid=166693,fd=14))
tcp     LISTEN   0        4096                    *:8080                   *:*             users:((&quot;node_exporter&quot;,pid=662,fd=3))
</code></pre>



<h3 id="1-what-do-you-think-the-problem-might-be-">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu9/#1-what-do-you-think-the-problem-might-be-">1. What do you think the problem might be? üîç</a>
</h3>
<p>There is a container call node exporter that is listening on port 8080, therefore the port is already in use. I think this is a pretty common issue as this port is normally used for public traffic. With many nodes running it is easy to double assign a port.</p>



<h3 id="2-how-will-you-test-this-">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu9/#2-how-will-you-test-this-">2. How will you test this? ü§î</a>
</h3>
<p>I would run the conflicting container run command with a slight port change.
podman run -dt -p 8081:80/tcp docker.io/library/httpd</p>



<h3 id="3-the-developer-tells-you-that-hes-pulling-a-local-image-do-you-find-this-to-be-true-or-is-something-else-happening-in-their-run-command">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu9/#3-the-developer-tells-you-that-hes-pulling-a-local-image-do-you-find-this-to-be-true-or-is-something-else-happening-in-their-run-command">3. The developer tells you that he‚Äôs pulling a local image, do you find this to be true, or is something else happening in their run command?</a>
</h3>
<p>It is true that once and image is pulled, it is stored locally. So the developer may have <strong>pulled</strong> the image. However in the command he is specifying a source for pulling a fresh container, so the dev is definitely sus. Typically if the image has been pulled it is given a container ID, which is then used to build with.</p>



<h2 id="installing-k3s-in-my-homelab-">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu9/#installing-k3s-in-my-homelab-">Installing K3s in my HomeLab üëç</a>
</h2>
<p>After completing the suggested lab, I took note of installation process and replicated it on my HomeLab. I just wanted to share my process and bumps.</p>



<h3 id="1-installation-from-curl-script">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu9/#1-installation-from-curl-script">1. Installation from curl script</a>
</h3>
<pre><code>curl -sfL https://get.k3s.io | sh -
</code></pre>



<h3 id="2-making-sure-the-service-is-running-in-systemd">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu9/#2-making-sure-the-service-is-running-in-systemd">2. Making sure the service is running in systemD</a>
</h3>
<pre><code>systemctl status k3s
</code></pre>



<h3 id="3-changing-config-permissions-problem-that-had-stumped-me">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu9/#3-changing-config-permissions-problem-that-had-stumped-me">3. Changing config permissions (Problem that had stumped me)</a>
</h3>
<pre><code>sudo chmod 644 /etc/rancher/k3s/k3s.yaml
</code></pre>



<h3 id="4-deploying-a-pod">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu9/#4-deploying-a-pod">4. Deploying a pod</a>
</h3>
<p>kubectl run nginx &ndash;image=nginx:alpine</p>



<h3 id="5-making-an-alias-so-commands-are-less-annoying">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu9/#5-making-an-alias-so-commands-are-less-annoying">5. Making an alias so commands are less annoying</a>
</h3>
<pre><code>alias k=kubectl
</code></pre>



<h3 id="6-checking-the-running-pod">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu9/#6-checking-the-running-pod">6. Checking the running pod</a>
</h3>
<pre><code>k get pods
</code></pre>



<h2 id="digging-deeper-">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu9/#digging-deeper-">Digging Deeper ‚õèÔ∏è</a>
</h2>



<h3 id="1see-if-you-can-get-a-deployment-working-in-the-lab">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu9/#1see-if-you-can-get-a-deployment-working-in-the-lab">1.	See if you can get a deployment working in the lab.</a>
</h3>
<p>Screen shots from this deployment</p>
<p><img src="https://trevorsmale.github.io/techblog/images/PACU9/1.png" alt="Step 1"><br>
<img src="https://trevorsmale.github.io/techblog/images/PACU9/volume.png" alt="Step 2"><br>
<img src="https://trevorsmale.github.io/techblog/images/PACU9/build.png" alt="Step 3"><br>
<img src="https://trevorsmale.github.io/techblog/images/PACU9/ps.png" alt="Step 4"><br>
<img src="https://trevorsmale.github.io/techblog/images/PACU9/attach.png" alt="Step 5"><br>
<img src="https://trevorsmale.github.io/techblog/images/PACU9/install1.png" alt="Step 6"><br>
<img src="https://trevorsmale.github.io/techblog/images/PACU9/install2.png" alt="Step 7"><br>
<img src="https://trevorsmale.github.io/techblog/images/PACU9/go.png" alt="Step 8"><br>
<img src="https://trevorsmale.github.io/techblog/images/PACU9/rungo.png" alt="Step 9"><br>
<img src="https://trevorsmale.github.io/techblog/images/PACU9/running.png" alt="Step 10"></p>



<h3 id="what-worked-well">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu9/#what-worked-well">What worked well?</a>
</h3>
<p>creating a persistent volume and attaching to the volume worked well.
mkdir /root/TreasuresVolume
Pulling and building an image worked well.
Attaching to the container and interacting with it went well.
podman run -dit &ndash;name TreasuresContainer -v /root/TreasuresVolume:/app docker.io/library/golang:alpine tail -f /dev/null
apk add vim gcc bash</p>



<h3 id="what-did-you-have-to-troubleshoot">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu9/#what-did-you-have-to-troubleshoot">What did you have to troubleshoot?</a>
</h3>
<p>I ran into trouble when exiting the container. It will kill the container, forcing me to start it again, which was frustrating.
Having done this in the past, I thought this would not be an issue. However, I just learned that containers without continually running services will die when exited.
The fix for such an issue is to run something light and persistent on the container in order to keep it alive. This can be accomplished with a bash script or turning a go binary into a system binary to keep running.</p>



<h3 id="what-documentation-can-you-make-to-be-able-to-do-this-faster-next-time">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu9/#what-documentation-can-you-make-to-be-able-to-do-this-faster-next-time">What documentation can you make to be able to do this faster next time?</a>
</h3>
<p>Actually, this blog is used to partially keep track of this. I use LogSeq as a second brain, where I will definitely copy and paste this info into my Podman section.</p>
<hr>



<h2 id="reflection-questions">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu9/#reflection-questions">Reflection Questionsü§î</a>
</h2>



<h3 id="1what-questions-do-you-still-have-about-this-week">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu9/#1what-questions-do-you-still-have-about-this-week">1.	What questions do you still have about this week?</a>
</h3>
<p>I would like to know more about small scale deployments of Kubernetes such as the one I deployed using Rancher and K3S. More specifically I would like to know what limitations a small scale deployment has versus a multi machine / multi node system.</p>



<h3 id="2how-can-you-apply-this-now-in-your-current-role-in-it-if-youre-not-in-it-how-can-you-look-to-put-something-like-this-into-your-resume-or-portfolio">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu9/#2how-can-you-apply-this-now-in-your-current-role-in-it-if-youre-not-in-it-how-can-you-look-to-put-something-like-this-into-your-resume-or-portfolio">2.	How can you apply this now in your current role in IT? If you‚Äôre not in IT, how can you look to put something like this into your resume or portfolio?</a>
</h3>
<p>This content is highly applicable to my intended work as deploying services is becoming increasingly important, as evidenced by the requirement for knowledge of Podman in the RHCSA 9. I already have some container deployment work to display to prospective employers atm. I plan to further my knowledge in this area, especially in regard to Kubernetes as this seems to be the operating system of the internet.</p>
<hr>



<h3 id="prolug-links-">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu9/#prolug-links-">ProLUG Links ‚õìÔ∏è</a>
</h3>
<p>Discord: <a href="https://discord.com/invite/m6VPPD9usw">https://discord.com/invite/m6VPPD9usw</a>
Youtube: <a href="https://www.youtube.com/@het_tanis8213">https://www.youtube.com/@het_tanis8213</a>
Twitch: <a href="https://www.twitch.tv/het_tanis">https://www.twitch.tv/het_tanis</a>
ProLUG Book: <a href="https://leanpub.com/theprolugbigbookoflabs">https://leanpub.com/theprolugbigbookoflabs</a>
KillerCoda: <a href="https://killercoda.com/het-tanis">https://killercoda.com/het-tanis</a></p>
      
      

  

  





  <footer>
    
      
        <ul class="Tags">
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/categories/learning/" rel="tag">Learning</a>
            </li>
          
        </ul>
      
    
      
        <ul class="Tags">
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/tech/" rel="tag">Tech</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/linux/" rel="tag">Linux</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/administration/" rel="tag">Administration</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/engineering/" rel="tag">Engineering</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/prolug-course/" rel="tag">ProLUG Course</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/operating-systems/" rel="tag">Operating Systems</a>
            </li>
          
        </ul>
      
    
  </footer>

    </article>
    
      <div class="Divider"></div>
    
  
    <article>
      <header class="Heading">
  <h1 class="Heading-title">
    <a class="Heading-link u-clickable" href="/techblog/post/pacu8/" rel="bookmark">ProLUG Admin Course Unit 8 üêß</a>
  </h1>
  
    <time datetime="2024-10-30T00:00:00Z">October 30, 2024</time>
  
</header>
      
        <h1 id="scripting-system-checks">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu8/#scripting-system-checks">Scripting System Checks</a>
</h1>
<p><img src="https://trevorsmale.github.io/techblog/images/PACU8/ibb.jpg" alt="Arnold"></p>
<p>Once again beyond the Discussion Posts and Labbing. I spent a great deal of time scripting/programming System checks. After completing the labs which Bash Scripting and intro to &lsquo;C&rsquo;, I got really into GO as a system util. I have a particularly productive day with using the embed.fs feature of GO and packing unix system tools together in a single go program at compilation. I think there is a ton of potential here for my own uses. üë®‚Äçüîß</p>



<h2 id="discussion-post-1">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu8/#discussion-post-1">Discussion Post 1</a>
</h2>
<p>Scenario</p>
<p>It‚Äôs a 2-week holiday in your country, and most of the engineers and architects who designed the system are out of town. You‚Äôve noticed a pattern of logs filling up on a set of web servers due to increased traffic. Research and verification show that the logs are being sent off in real time to Splunk. Your team has been deleting the logs every few days, but a 3rd-shift engineer missed this in the notes, causing downtime. How might you implement a simple fix to stop-gap the problem until all engineering resources return next week?</p>
<ul>
<li>
<p><strong>Resources Used</strong>:</p>
</li>
<li>
<p>TryHackMe (Splunk) Intro</p>
</li>
<li>
<p>Study Group discussion</p>
</li>
<li>
<p>ChatGPT</p>
</li>
<li>
<p>Blogs:</p>
</li>
<li>
<p><a href="https://www.nohl.eu/tech-resources/notes-to-linux/log-files-in-tmpfs-without-breaking-logging/">Nohl&rsquo;s Tech Resources: Log Files in tmpfs Without Breaking Logging</a></p>
</li>
<li>
<p><a href="https://dietpi.com/docs/software/log_system/">DietPi Documentation: Log System</a></p>
</li>
</ul>



<h4 id="why-cant-you-just-make-a-design-fix-and-add-space-in-varlog-on-all-these-systems">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu8/#why-cant-you-just-make-a-design-fix-and-add-space-in-varlog-on-all-these-systems">Why can‚Äôt you just make a design fix and add space in /var/log on all these systems?</a>
</h4>
<p>Adding more space to <code>/var/log</code> might be a design fix, but it isn‚Äôt feasible in the short term due to:</p>
<ul>
<li><strong>Operational Constraints</strong>: Extending storage may involve downtime, additional permissions, or architectural changes that can‚Äôt be approved without the primary engineers.</li>
<li><strong>Temporary Nature of the Fix</strong>: Increasing space only delays the issue. If logs continue to grow, the problem will recur once space is exhausted again.</li>
</ul>



<h4 id="why-cant-you-just-make-a-design-change-and-use-logrotate-more-frequently">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu8/#why-cant-you-just-make-a-design-change-and-use-logrotate-more-frequently">Why can‚Äôt you just make a design change and use logrotate more frequently?</a>
</h4>
<ul>
<li><strong>Possibility of Log Loss</strong>: Higher logrotate frequency could still miss high-frequency log spikes, especially during unusual traffic peaks, risking logs being deleted before Splunk ingestion is complete.</li>
<li><strong>Configuration and Testing</strong>: Aggressive logrotate adjustments may interfere with processes expecting logs at specific retention periods. Testing changes in production without key team members isn‚Äôt ideal.</li>
</ul>



<h4 id="temporary-fix-options">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu8/#temporary-fix-options">Temporary Fix Options</a>
</h4>
<p>To address the issue, consider implementing a temporary fix by configuring a log retention policy that aggressively compresses or truncates logs without disrupting active processes. Here are some potential approaches:</p>



<h3 id="implement-a-temporary-cron-job">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu8/#implement-a-temporary-cron-job">Implement a Temporary <strong>Cron Job</strong></a>
</h3>
<p>Schedule a cron job to truncate logs on a more aggressive schedule without deleting them. For example:</p>

  

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">&gt; /var/log/access.log
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="sb">```</span>bash
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  &gt; /var/log/access.log</span></span></code></pre></div>
<p>This would empty the log file without removing it or impacting the active file descriptors held by any running processes.</p>



<h3 id="set-up-temporary-log-compression">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu8/#set-up-temporary-log-compression">Set Up Temporary Log Compression</a>
</h3>
<p>Compress the logs after truncation if additional space savings are needed. Tools like gzip can compress logs efficiently, reducing disk space usage and ensuring logs are still accessible if required for audits or incident investigations.</p>



<h3 id="implement-a-ram-disk-for-temporary-logs">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu8/#implement-a-ram-disk-for-temporary-logs">Implement a RAM Disk for Temporary Logs</a>
</h3>
<p>As a short-term measure, you could set up a RAM disk for logs that don‚Äôt need long-term retention. This allows logs to be stored temporarily in memory, reducing disk space pressure. For instance</p>

  

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  mount -t tmpfs -o <span class="nv">size</span><span class="o">=</span>512M tmpfs /var/log/temp</span></span></code></pre></div>
<p>You could then configure lower-priority logs to write here temporarily, knowing they will be lost upon reboot, which may be acceptable in a crisis scenario.</p>



<h3 id="adjust-splunk-forwarder-configuration">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu8/#adjust-splunk-forwarder-configuration">Adjust Splunk Forwarder Configuration:</a>
</h3>
<p>If possible, configure the Splunk forwarder to filter logs more aggressively, reducing the volume of logs that are retained on the system. The props.conf or inputs.conf files can be configured to forward logs without keeping local copies.</p>
<p>Adding more space to /var/log might be a design fix, but it isn‚Äôt feasible in the short term due to the following:</p>
<ul>
<li>Operational Constraints: Extending storage could involve downtime, additional permissions, or changes that require architectural decisions that can‚Äôt be made without the primary engineers.</li>
<li>Temporary Nature of the Fix: Increasing space only delays the issue rather than preventing it. If the logs keep growing, the problem will recur once space runs out again.</li>
</ul>



<h2 id="discussion-post-2">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu8/#discussion-post-2">Discussion Post 2</a>
</h2>
<p>You are the only Linux Administrator at a small healthcare company. The engineer/admin before you left you a lot of scripts to untangle. This is one of our many tasks as administrators, so you set out to accomplish it. You start to notice that he only ever uses nested if statements in bash. You also notice that every loop is a conditional <code>while true</code> and then he breaks the loop after a decision test each loop. You know his stuff works, but you think it could be more easily written for supportability, for you and future admins. You decide to write up some notes by reading some google, AI, and talking to your peers.</p>



<h3 id="compare-the-use-of-nested-if-versus-case-statement-in-bash">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu8/#compare-the-use-of-nested-if-versus-case-statement-in-bash">Compare the use of nested if versus case statement in bash.</a>
</h3>
<ul>
<li>Nested if statements are useful for situations where each condition depends on the result of the previous test, requiring a hierarchy or sequence.</li>
<li>A case statement is ideal for handling multiple discrete values of a variable, especially if there are many possible branches. It‚Äôs typically cleaner and more readable than a nested if.</li>
</ul>



<h3 id="compare-the-use-of-conditional-and-counting-loops-under-what-circumstances">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu8/#compare-the-use-of-conditional-and-counting-loops-under-what-circumstances">Compare the use of conditional and counting loops. Under what circumstances</a>
</h3>
<ul>
<li>Use conditional loops (while) when you don‚Äôt know the number of iterations in advance and need to loop based on conditions.</li>
<li>Use counting loops (for) when you have a set number of iterations or are working with a list. This structure is clearer and prevents issues that may arise from unintentional infinite loops.</li>
</ul>



<h3 id="would-you-use-one-or-the-other">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu8/#would-you-use-one-or-the-other">would you use one or the other?</a>
</h3>
<p>optimizing or refactoring Bash scripts the Engineer had left me.</p>
<ul>
<li>I would replace nested if statements with case statements when possible to improve readability, especially when handling multiple discrete values.</li>
<li>Of course, I would comment things for added communication/ maintainability.</li>
<li>I would Limit while true loops to cases where no predictable count or list is available. Clearly define a break condition early to avoid infinite loops.</li>
<li>I would Use for loops for counting or iterating over arrays or lists, as they provide a clean structure with known iteration limits.</li>
</ul>
<hr>



<h3 id="prolug-links-">
  <a class="Heading-link u-clickable" href="/techblog/post/pacu8/#prolug-links-">ProLUG Links ‚õìÔ∏è</a>
</h3>
<p>Discord: <a href="https://discord.com/invite/m6VPPD9usw">https://discord.com/invite/m6VPPD9usw</a>
Youtube: <a href="https://www.youtube.com/@het_tanis8213">https://www.youtube.com/@het_tanis8213</a>
Twitch: <a href="https://www.twitch.tv/het_tanis">https://www.twitch.tv/het_tanis</a>
ProLUG Book: <a href="https://leanpub.com/theprolugbigbookoflabs">https://leanpub.com/theprolugbigbookoflabs</a>
KillerCoda: <a href="https://killercoda.com/het-tanis">https://killercoda.com/het-tanis</a></p>
      
      

  

  





  <footer>
    
      
        <ul class="Tags">
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/categories/learning/" rel="tag">Learning</a>
            </li>
          
        </ul>
      
    
      
        <ul class="Tags">
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/tech/" rel="tag">Tech</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/linux/" rel="tag">Linux</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/administration/" rel="tag">Administration</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/engineering/" rel="tag">Engineering</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/prolug-course/" rel="tag">ProLUG Course</a>
            </li>
          
            <li class="Tags-item u-background">
              <a class="Tags-link u-clickable" href="/techblog/tags/operating-systems/" rel="tag">Operating Systems</a>
            </li>
          
        </ul>
      
    
  </footer>

    </article>
    
  

  
  <nav>
    
      <a class="Pagination u-clickable" href="/techblog/page/2/" rel="prev">¬´ Previous</a>
    
    
  </nav>




      </div>
    </div>
  </main>
  
</body>

</html>
